{"version":3,"sources":["PlayerSelect.js","StrategySelect.js","TimerBlock.js","TechPanel.js","StatusBoard.js","PlayAgenda.js","ObjectiveSelectModal.js","ObjectivePanel.js","SpeakerChangeModal.js","GameManager.js","serviceWorker.js","index.js"],"names":["PlayerSelect","props","playerDetails","Array","i","createPlayer","state","selectedNumberOfPlayers","playerNumber","playerName","faction","properties","testMode","faction_store","colour","colour_store","victoryPoints","isSpeaker","isActivePlayer","isPassed","availableVotes","spentVotes","this","setState","playerNumberSelections","fill","e","slice","target","value","JSON","parse","finalPlayerDetails","initialiseTechnologies","onStartGame","map","player","newPlayer","techSets","push","createPlayerTechnologies","tech_store","Biotic","Warfare","Propulsion","Cybernetic","shortName","Ship","Unit","Warsun","techs","techSet","techDefinition","isResearched","selectedFactions","selectedColours","selectedNames","includes","description","determineSelection","Row","Col","xs","xl","span","offset","onClick","playerNumberButtonHandleClick","numberOfPlayers","onPlayerNameChange","handlePlayerNameChange","onPlayerFactionChange","handlePlayerFactionChange","onPlayerColourChange","handlePlayerColourChange","Button","type","disabled","isGameReady","handleStartGame","React","Component","PlayerNumberSelect","isSelected","PlayerNumberButton","selected","renderPlayerNumberButton","className","id","PlayerDetailForm","playerDetailEntries","key","playerDetail","onFactionChange","onColourChange","renderPlayerDetailEntries","PlayerDetailEntry","factionElements","hidden","concat","stringify","fullName","playerFaction","undefined","required","onChange","colourElements","playerColour","defaultValue","getFactionList","getColourList","StrategySelect","onStartRound","onPlayAgenda","selectedStrategyCards","length","strategy","strategyCard","number","onPlayerStrategyChange","onSpeakerButtonClick","variant","onToggleTimers","isGameActive","handlePlayAgenda","isRoundReady","handleStartRound","PlayerStrategyForm","players","speakerIndex","playerStrategyEntries","destinationIndex","onStrategyChange","renderPlayerStrategyEntries","PlayerStrategyEntry","strategyElements","strategy_card_store","name","playerStrategy","getStrategyList","Timer","time","TimerBlock","totalSeconds","hours","Math","floor","minutes","seconds","parseTime","currentSeconds","interactive","label","TechPanel","techSetGroups","TechSetGroup","onTechClick","techButtons","TechButton","tech","text","PlayerCard","playerBackgroundColour","playerTextColour","textColour","playerStrategyButton","style","backgroundColor","isUsed","onStrategyCardClick","speakerButtonColumn","Card","onEndTurn","noGutters","color","onPassButtonClick","playerTimer","onVictoryPointsClick","onContextMenu","EndRoundConfirmModal","Modal","show","showModal","onHide","onCloseModal","centered","Body","Footer","onConfirmModal","StatusBoard","useState","showEndRoundModal","setShowEndRoundModal","sort","a","b","playerCards","playerTimers","isAllPassed","isAllPlayersPassed","ButtonGroup","onEndRound","PlayAgenda","onNextAgenda","onEndAgenda","AgendaForm","selectedAgenda","onAgendaChange","onAvailableVotesClick","playerString","delta","onSpentVotesClick","onVoteTargetChange","handleNextAgenda","handleEndAgenda","votePanel","VotePanel","resultsPanel","ResultsPanel","AgendaSelector","agendaElements","agenda_store","agenda","getAgendaList","AgendaCard","playerVotePanels","PlayerVotePanel","VoteTargetSelector","voteTarget","agendaCardDisplay","electionTarget","forEffect","againstEffect","voteOptions","resolutions","existingResolution","j","resolution","votes","votedResolutions","ObjectiveSelectModal","selectedObjectives","objectives","objective","isRevealed","filter","availableObjectives","objective_store","stage","some","selectedObjective","objectiveElements","objectiveSelect","onObjectiveChange","Header","Title","selectedObjectiveSelection","longDescription","ObjectivePanel","objectiveBlocks","ObjectiveCard","order","shortDescription","onObjectiveCardClick","cardDisplay","SpeakerChangeModal","playerList","playerSelect","onSpeakerChange","selectedSpeakerNumber","GameHeader","turnTimer","showTurnTimer","currentTurnTimer","onTurnTimerClick","roundNumber","totalGameTimer","onGameTimerClick","GameManager","gameMode","showObjectiveSelectModal","showSpeakerChangeModal","baseSeconds","countStartTime","Date","now","isCounting","publicObjectives","fillPublicObjectives","heartbeat","setInterval","recalculateTimers","clearInterval","startGameTimer","newStrategy","newPlayerDetails","handleSpeakerButtonClicked","lowestInitiative","startTurnTimers","stopTurnTimers","stopGameTimer","newVictoryPoints","nativeEvent","which","maxVictoryPoints","newAvailableVotes","min","max","newSpentVotes","newVoteTarget","restartTurnTimers","index","nextUnrevealedObjective","newObjective","isConfirmed","newPublicObjectives","newAgenda","newSpeakerNumber","oldSpeaker","newSpeaker","newTechSets","newTechs","newTech","NUMBER_OBJECTIVES_STAGE_ONE","recalculateGameTime","recalculateTurnTime","timer","getActivePlayer","resetCurrentTurn","currentPlayer","currentPlayerTimer","nextPlayer","getNextPlayer","nextPlayerTimer","activePlayer","highestInitiativeNumber","playerInitiativeNumber","renderPlayerSelect","renderStrategy","renderStatusBoard","renderAgenda","Container","fluid","renderGameHeader","md","renderObjectivePanel","handleToggleTimers","handlePlayerStrategyChange","handleEndTurn","handleVictoryPointClick","handleStrategyCardClicked","handlePassButtonClicked","handleEndRound","handleTechClicked","handleAgendaChange","handleAvailableVotesClick","handleSpentVotesClick","handleVoteTargetChange","handleTurnTimerClicked","handleGameTimerClicked","handleObjectiveCardClicked","renderGameComponent","handleCloseObjectiveSelectModal","handleObjectiveChange","handleCloseSpeakerChangeModal","handleSpeakerChange","Boolean","window","location","hostname","match","document","oncontextmenu","preventDefault","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.1c7d9fca.chunk.js","sourcesContent":["import React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Row, Col} from 'react-bootstrap';\r\n\r\nimport './PlayerSelect.css';\r\n\r\nimport faction_store from './data/factions.json';\r\nimport tech_store from './data/technologies.json';\r\nimport properties from './data/properties.json';\r\nimport colour_store from './data/colours.json';\r\n\r\nconst PLAYER_NUMBER_INDEX_OFFSET = 3; //player 3 is array index 0\r\nconst MAX_PLAYER_NUMBER = 6;\r\n\r\nclass PlayerSelect extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let playerDetails = Array(MAX_PLAYER_NUMBER);\r\n        for (let i = 0; i < MAX_PLAYER_NUMBER; i++) {\r\n            playerDetails[i] = this.createPlayer(i);\r\n        }\r\n\r\n        this.state = {\r\n            selectedNumberOfPlayers: MAX_PLAYER_NUMBER,\r\n            playerDetails: playerDetails,\r\n        };\r\n    }\r\n\r\n    createPlayer(playerNumber) {\r\n        let playerDetail = {\r\n            playerName: \"Player \" + (playerNumber + 1),\r\n            playerNumber: playerNumber,\r\n            faction: properties.testMode ? faction_store[playerNumber] : null,\r\n            colour: properties.testMode ? colour_store[playerNumber] : null,\r\n            victoryPoints: 0,\r\n            isSpeaker: playerNumber === 0 ? true : false,\r\n            isActivePlayer: playerNumber === 0 ? true : false,\r\n            isPassed: false,\r\n            availableVotes: 0,\r\n            spentVotes: 0,\r\n        }\r\n        return playerDetail;\r\n    }\r\n\r\n    playerNumberButtonHandleClick(playerNumber) {\r\n        this.setState({\r\n            selectedNumberOfPlayers: playerNumber,\r\n        });\r\n    }\r\n\r\n    determineSelection() {\r\n        let playerNumberSelections = Array(MAX_PLAYER_NUMBER).fill(false);\r\n        if (this.state.selectedNumberOfPlayers !== null) {\r\n            playerNumberSelections[this.state.selectedNumberOfPlayers - PLAYER_NUMBER_INDEX_OFFSET] = true;\r\n        }\r\n\r\n        return playerNumberSelections;\r\n    }\r\n\r\n    handlePlayerNameChange(e, playerNumber) {\r\n        let playerDetails = this.state.playerDetails.slice();\r\n        playerDetails[playerNumber].playerName = e.target.value;\r\n        this.setState ({\r\n            playerDetails: playerDetails,\r\n        });\r\n    }\r\n\r\n    handlePlayerFactionChange(e, playerNumber) {\r\n        let playerDetails = this.state.playerDetails.slice();\r\n        playerDetails[playerNumber].faction = JSON.parse(e.target.value);\r\n        this.setState ({\r\n            playerDetails: playerDetails,\r\n        });\r\n    }\r\n    \r\n    handlePlayerColourChange(e, playerNumber) {\r\n        let playerDetails = this.state.playerDetails.slice();\r\n        playerDetails[playerNumber].colour = JSON.parse(e.target.value);\r\n        this.setState ({\r\n            playerDetails: playerDetails,\r\n        });\r\n    }\r\n\r\n    handleStartGame() {\r\n        let finalPlayerDetails = this.state.playerDetails.slice(0, this.state.selectedNumberOfPlayers)\r\n        finalPlayerDetails = this.initialiseTechnologies(finalPlayerDetails);\r\n\r\n        return this.props.onStartGame(finalPlayerDetails);\r\n    }\r\n\r\n    initialiseTechnologies(finalPlayerDetails) {\r\n        let playerDetails = finalPlayerDetails.map((player) => {\r\n            let newPlayer = {...player};\r\n            let techSets = [];\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Biotic));\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Warfare));\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Propulsion));\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Cybernetic));\r\n            techSets.push(this.createPlayerTechnologies(tech_store[newPlayer.faction.shortName]));\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Ship));\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Unit));\r\n            techSets.push(this.createPlayerTechnologies(tech_store.Warsun));\r\n            newPlayer.techs = techSets;\r\n            return newPlayer;\r\n        });\r\n\r\n        return playerDetails;\r\n    }\r\n\r\n    createPlayerTechnologies(techSet) {\r\n        let playerTechs = techSet.map((techDefinition) => {\r\n            return {\r\n                techDefinition: techDefinition,\r\n                isResearched: false,\r\n            };\r\n        });\r\n\r\n        return playerTechs;\r\n    }\r\n\r\n    isGameReady() {\r\n        if (!this.state.selectedNumberOfPlayers) {\r\n            return true;\r\n        }\r\n        \r\n        let selectedFactions = [];\r\n        let selectedColours = [];\r\n        let selectedNames = [];\r\n        for (let i = 0; i < this.state.selectedNumberOfPlayers; i++) {\r\n            let player = this.state.playerDetails[i];\r\n            if (!player.faction || !player.colour || !player.playerName ||\r\n                    selectedColours.includes(player.colour.description) ||\r\n                    selectedFactions.includes(player.faction.shortName) || \r\n                    selectedNames.includes(player.playerName)) {\r\n                return true;\r\n            }\r\n            selectedFactions[i] = player.faction.shortName;\r\n            selectedColours[i] = player.colour.description;\r\n            selectedNames[i] = player.playerName;\r\n        }\r\n\r\n\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const playerNumberSelections = this.determineSelection();\r\n\r\n        return (\r\n            <Row>\r\n                <Col xs={12} xl={{span: 8, offset: 2}}> \r\n                    <div>\r\n                        <h1>Number of Players</h1>\r\n                        <PlayerNumberSelect \r\n                            playerNumberSelections={playerNumberSelections}\r\n                            onClick={playerNumber => this.playerNumberButtonHandleClick(playerNumber)}\r\n                        />\r\n                    </div>\r\n                    <form>\r\n                        <PlayerDetailForm \r\n                            numberOfPlayers={this.state.selectedNumberOfPlayers} \r\n                            playerDetails={this.state.playerDetails}\r\n                            onPlayerNameChange={(e, playerNumber) => this.handlePlayerNameChange(e, playerNumber)}\r\n                            onPlayerFactionChange={(e, playerNumber) => this.handlePlayerFactionChange(e, playerNumber)}\r\n                            onPlayerColourChange={(e, playerNumber) => this.handlePlayerColourChange(e, playerNumber)}\r\n                        />\r\n                        <Button type=\"button\" disabled= {this.isGameReady()} onClick={() => this.handleStartGame()}>\r\n                            Start Game\r\n                        </Button>\r\n                    </form>\r\n                </Col>\r\n            </Row>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nclass PlayerNumberSelect extends React.Component {\r\n    renderPlayerNumberButton(playerNumber) {\r\n        const isSelected = this.props.playerNumberSelections[playerNumber - PLAYER_NUMBER_INDEX_OFFSET];\r\n\r\n        return (\r\n            <PlayerNumberButton\r\n                value={playerNumber}\r\n                selected={isSelected}\r\n                onClick={() => this.props.onClick(playerNumber)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Row>\r\n                { this.renderPlayerNumberButton(3) }\r\n                { this.renderPlayerNumberButton(4) }\r\n                { this.renderPlayerNumberButton(5) }\r\n                { this.renderPlayerNumberButton(6) }\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction PlayerNumberButton(props) {\r\n    return (\r\n        <button \r\n            className={`playerNumButton ${props.selected ? \"selectedPlayerNumButton\" : \"\"}`} \r\n            id={`${props.value}Player`} \r\n            onClick={props.onClick}\r\n        >\r\n            {props.value}\r\n        </button>\r\n    );\r\n}\r\n\r\n\r\nclass PlayerDetailForm extends React.Component {\r\n    renderPlayerDetailEntries() {\r\n        let playerDetailEntries = Array(this.props.numberOfPlayers);\r\n        for (let i = 0; i < this.props.numberOfPlayers; i++) {\r\n            playerDetailEntries[i] = <PlayerDetailEntry \r\n                key={i}\r\n                playerDetail={this.props.playerDetails[i]}\r\n                onPlayerNameChange={e => this.props.onPlayerNameChange(e, i)}\r\n                onFactionChange={e => this.props.onPlayerFactionChange(e, i)}\r\n                onColourChange={e => this.props.onPlayerColourChange(e, i)}\r\n            />;\r\n        }\r\n\r\n        return (<div>\r\n            {playerDetailEntries}\r\n        </div>);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.renderPlayerDetailEntries()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass PlayerDetailEntry extends React.Component {\r\n    getFactionList() {\r\n        let factionElements = [<option key=\"unselected\" value={null} hidden/>]\r\n        factionElements = factionElements.concat(faction_store.map((faction) => \r\n            <option key={faction.shortName} value={JSON.stringify(faction)}>\r\n                {faction.fullName}\r\n            </option>));\r\n\r\n        let playerFaction = this.props.playerDetail.faction ? JSON.stringify(this.props.playerDetail.faction) : undefined;\r\n\r\n        return <select \r\n            id=\"factions\" \r\n            required \r\n            value={playerFaction}\r\n            onChange={this.props.onFactionChange}\r\n        >\r\n            {factionElements}\r\n        </select>;\r\n    }\r\n\r\n    getColourList() {\r\n        let colourElements = [<option key=\"unselected\" value={null} hidden/>]\r\n        colourElements = colourElements.concat(colour_store.map((colour) => \r\n            <option key={colour.description} value={JSON.stringify(colour)}>\r\n                {colour.description}\r\n            </option>));\r\n\r\n        let playerColour = this.props.playerDetail.colour ? JSON.stringify(this.props.playerDetail.colour) : undefined;\r\n\r\n        return <select \r\n            id=\"colours\" \r\n            required \r\n            defaultValue={playerColour} \r\n            onChange={this.props.onColourChange}\r\n        >\r\n            {colourElements}\r\n        </select>;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Row>\r\n                <Col xs={{span: 2, offset: 0}} xl={{span: 1, offset: 1}}>\r\n                    <button className={`speakerToken ${this.props.playerDetail.isSpeaker ? \"\" : \"invisible\"} disabled`}/>\r\n                </Col>\r\n                <Col xs={4}>\r\n                    <input \r\n                        type=\"text\"\r\n                        defaultValue={this.props.playerDetail.playerName} \r\n                        onChange={this.props.onPlayerNameChange}\r\n                    />\r\n                </Col>\r\n                <Col xs={4}>\r\n                    {this.getFactionList()}\r\n                </Col>\r\n                <Col xs={2}>\r\n                    {this.getColourList()}\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PlayerSelect;","import React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Row, Col} from 'react-bootstrap';\r\n\r\nimport strategy_card_store from './data/strategy-cards.json';\r\n\r\nclass StrategySelect extends React.Component {\r\n    handleStartRound() {\r\n        if (this.props.onStartRound) {\r\n            return () => this.props.onStartRound()\r\n        }\r\n    }\r\n\r\n    handlePlayAgenda() {\r\n        if (this.props.onPlayAgenda) {\r\n            return () => this.props.onPlayAgenda()\r\n        }\r\n    }\r\n\r\n    isRoundReady() {\r\n        let selectedStrategyCards = [];\r\n        for (let i = 0; i < this.props.playerDetails.length; i++) {\r\n            let player = this.props.playerDetails[i];\r\n            if (!player.strategy || \r\n                    selectedStrategyCards.includes(player.strategy.strategyCard.number)) {\r\n                return true;\r\n            }\r\n            selectedStrategyCards[i] = player.strategy.strategyCard.number;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    {/*TODO: add strategy cards */}\r\n                </Row>\r\n                <Row>\r\n                    <PlayerStrategyForm\r\n                        playerDetails={this.props.playerDetails}\r\n                        onPlayerStrategyChange={(e, playerNumber) => this.props.onPlayerStrategyChange(e, playerNumber)}\r\n                        onSpeakerButtonClick={this.props.onSpeakerButtonClick}\r\n                    />\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <Button variant=\"light\" type=\"button\" onClick={() => this.props.onToggleTimers()}>\r\n                            {this.props.isGameActive ? \"Pause Game\" : \"Resume Game\"}\r\n                        </Button>\r\n                    </Col>\r\n                    <Col>\r\n                        <Button type=\"button\" onClick={this.handlePlayAgenda()}>\r\n                            Play Agenda\r\n                        </Button>\r\n                    </Col>\r\n                    <Col>\r\n                        <Button type=\"button\" disabled={this.isRoundReady()} onClick={this.handleStartRound()}>\r\n                            Start Round\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nclass PlayerStrategyForm extends React.Component {\r\n    renderPlayerStrategyEntries() {\r\n        const players = this.props.playerDetails.slice();\r\n        var speakerIndex = 0;\r\n        for (let i = 0; i < players.length; i++) {\r\n            speakerIndex = players[i].isSpeaker ? i : speakerIndex;\r\n        }\r\n\r\n        let playerStrategyEntries = Array(players.length).fill(null);\r\n        for (let i = 0; i < players.length; i++) {\r\n            let destinationIndex = (((i - speakerIndex) % players.length) + players.length) % players.length;\r\n            playerStrategyEntries[destinationIndex] =\r\n                <PlayerStrategyEntry\r\n                    key={players[i].playerNumber}\r\n                    playerDetail={players[i]}\r\n                    onStrategyChange={e => this.props.onPlayerStrategyChange(e, players[i].playerNumber)}\r\n                    onSpeakerButtonClick={this.props.onSpeakerButtonClick}\r\n                />\r\n        }\r\n            \r\n        return (<Col>\r\n            {playerStrategyEntries}\r\n        </Col>);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.renderPlayerStrategyEntries()\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass PlayerStrategyEntry extends React.Component {\r\n    getStrategyList() {\r\n        let strategyElements = [<option key=\"unselected\" value={null} hidden/>]\r\n        strategyElements = strategyElements.concat(strategy_card_store.map((strategy) => \r\n            <option key={strategy.name} value={JSON.stringify(strategy)}>\r\n                {strategy.name}\r\n            </option>));\r\n\r\n        let playerStrategy = this.props.playerDetail.strategy ? JSON.stringify(this.props.playerDetail.strategy.strategyCard) : undefined;\r\n\r\n        return <select \r\n            id=\"strategies\" \r\n            required \r\n            value={playerStrategy} \r\n            onChange={this.props.onStrategyChange}\r\n        >\r\n            {strategyElements}\r\n        </select>;\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Row>\r\n                <Col xs={2} xl={1}>\r\n                    <button \r\n                        className={`speakerToken ${this.props.playerDetail.isSpeaker ? \"\" : \"invisible\"}`}\r\n                        onClick={this.props.onSpeakerButtonClick} \r\n                    />\r\n                </Col>\r\n                <Col xs={10} xl={11}>\r\n                    <input\r\n                        key=\"playerName\"\r\n                        type=\"text\"\r\n                        defaultValue={this.props.playerDetail.playerName}\r\n                        disabled\r\n                    />\r\n                {/* </Col> */}\r\n                {/* <Col xs={3}> */}\r\n                    <input\r\n                        key=\"playerFaction\"\r\n                        type=\"text\"\r\n                        defaultValue={this.props.playerDetail.faction && this.props.playerDetail.faction.fullName}\r\n                        disabled\r\n                    />\r\n                {/* </Col> */}\r\n                {/* <Col xs={4}> */}\r\n                    {this.getStrategyList()}\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default StrategySelect;","import React from 'react';\r\nimport './TimerBlock.css';\r\n\r\nconst secondsInMinute = 60;\r\nconst secondsInHour = 60 * 60;\r\n\r\nfunction Timer(props) {\r\n    return (\r\n        <button className=\"timer\" onClick={props.onClick} disabled={props.disabled}>\r\n            {props.time}\r\n        </button>\r\n    );\r\n}\r\n\r\nclass TimerBlock extends React.Component {\r\n    render() {\r\n        const time = parseTime(this.props.currentSeconds);\r\n\r\n        let interactive = this.props.onClick;\r\n\r\n        return (\r\n            <span className=\"Timer\">\r\n                <label className=\"timerLabel\">{this.props.label}</label>\r\n                <Timer time={time} disabled={this.props.disabled} onClick={interactive ? () => this.props.onClick(this.props.currentSeconds) : null} />\r\n            </span>\r\n        );\r\n    }\r\n}\r\n\r\n//-------------------------------------------\r\n\r\nfunction parseTime(totalSeconds) {\r\n    if (!totalSeconds) {\r\n        return \"00:00\";\r\n    }\r\n\r\n    const hours = Math.floor(totalSeconds / secondsInHour);\r\n    const minutes = Math.floor((totalSeconds % secondsInHour) / secondsInMinute);\r\n    const seconds = totalSeconds % secondsInMinute;\r\n\r\n    var time = hours > 0 ? hours + \":\" : \"\";\r\n    time += (minutes < 10 ? \"0\" + minutes : minutes) + \":\";\r\n    time += seconds < 10 ? \"0\" + seconds : seconds;\r\n\r\n    return time;\r\n}\r\n\r\nexport default TimerBlock;","import React from 'react';\r\nimport {Row, Col} from 'react-bootstrap'\r\n\r\nimport './TechPanel.css';\r\n\r\n\r\nexport default function TechPanel(props) {\r\n    let techSetGroups = [];\r\n    for (let i = 0; i < props.techs.length; i++) {\r\n        techSetGroups[i] = <TechSetGroup \r\n            key={i} \r\n            techSet={props.techs[i]} \r\n            className=\"techSetGroup\" \r\n            onTechClick={(techDefinition) => props.onTechClick(techDefinition)} \r\n        />;\r\n    }\r\n\r\n    return (\r\n        techSetGroups\r\n    );\r\n}\r\n\r\n\r\nfunction TechSetGroup(props) {\r\n    let techButtons = [];\r\n    for (let i = 0; i < props.techSet.length; i++) {\r\n        let span = 12 / props.techSet.length;\r\n        techButtons[i] = \r\n            <Col key={i} xs={span}>\r\n                <TechButton \r\n                    key={props.techSet[i].techDefinition.name} \r\n                    tech={props.techSet[i]} \r\n                    onTechClick={() => props.onTechClick(props.techSet[i].techDefinition)} \r\n                />\r\n            </Col>\r\n    }\r\n\r\n    return (\r\n        <Row>\r\n            {techButtons}\r\n        </Row>\r\n    );\r\n}\r\n\r\n\r\nfunction TechButton(props) {\r\n    return (\r\n        <button \r\n            className={`rounded techButton ${props.tech.techDefinition.type} ${props.tech.isResearched ? \"researched\" : \"\"} `}\r\n            onClick={props.onTechClick}\r\n        >\r\n            {props.tech.techDefinition.text}\r\n        </button> \r\n    );\r\n}\r\n","import React, {useState} from 'react';\r\nimport TimerBlock from './TimerBlock';\r\nimport Button from 'react-bootstrap/Button'\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport {Row, Col} from 'react-bootstrap'\r\nimport Card from 'react-bootstrap/Card'\r\n\r\nimport './StatusBoard.css';\r\nimport TechPanel from './TechPanel';\r\n\r\nconst USED_STRATEGY_COLOUR = \"grey\";\r\n\r\nfunction StatusBoard(props) {\r\n    const [showEndRoundModal, setShowEndRoundModal] = useState(false);\r\n\r\n    let players = props.players.slice();\r\n    players.sort((a, b) => a.strategy.strategyCard.number - b.strategy.strategyCard.number);\r\n\r\n    let playerCards = players.map(\r\n        (player) => \r\n        <Col key={player.playerNumber}>\r\n            <PlayerCard \r\n                key={player.playerNumber} \r\n                player={player}\r\n                playerTimer={props.playerTimers[player.playerNumber]}\r\n                onEndTurn={() => props.onEndTurn()}\r\n                onVictoryPointsClick={e => props.onVictoryPointsClick(e, JSON.stringify(player))}\r\n                onStrategyCardClick={() => props.onStrategyCardClick(JSON.stringify(player))}\r\n                onPassButtonClick={() => props.onPassButtonClick(JSON.stringify(player))}\r\n                onTechClick={(techDefinition) => props.onTechClick(techDefinition, player)}\r\n                onSpeakerButtonClick={props.onSpeakerButtonClick}\r\n            />\r\n        </Col>\r\n    );\r\n\r\n    const isAllPassed = isAllPlayersPassed(players);\r\n\r\n    return (\r\n        <div className=\"d-flex flex-column\">\r\n            <Row>\r\n                {playerCards}\r\n            </Row>\r\n            <Row>\r\n                <Col xs={{span:2, offset:1}}>\r\n                    <Button variant=\"light\" type=\"button\" onClick={() => props.onToggleTimers()}>\r\n                        {props.isGameActive ? \"Pause Game\" : \"Resume Game\"}\r\n                    </Button>\r\n                </Col>\r\n                <Col xs={{span:3, offset:6}}>\r\n                    <ButtonGroup>\r\n                        <Button type=\"button\" disabled={isAllPassed} onClick={() => props.onEndTurn()}>\r\n                            End Turn\r\n                        </Button>\r\n                        <Button type=\"button\" disabled={!isAllPassed} onClick={() => setShowEndRoundModal(true)}>\r\n                            End Round\r\n                        </Button>\r\n                    </ButtonGroup>\r\n                </Col>\r\n            </Row>\r\n            <EndRoundConfirmModal \r\n                showModal={showEndRoundModal}\r\n                onConfirmModal={() => props.onEndRound()}\r\n                onCloseModal={() => setShowEndRoundModal(false)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nfunction PlayerCard(props) {\r\n    const player = props.player;\r\n    let playerBackgroundColour = player.colour ? player.colour.colour : null;\r\n    let playerTextColour = player.colour ? player.colour.textColour : null;\r\n    let playerStrategy = player.strategy;\r\n    let playerStrategyButton = playerStrategy ? \r\n        <button \r\n            className=\"strategyCardButton\" \r\n            type=\"button\"\r\n            style={{backgroundColor: playerStrategy.isUsed ? USED_STRATEGY_COLOUR : playerStrategy.strategyCard.colour,}}\r\n            onClick={props.onStrategyCardClick}\r\n        >\r\n            {playerStrategy.strategyCard.number}\r\n        </button> : \r\n        null;\r\n\r\n    let speakerButtonColumn = player.isSpeaker ? \r\n        <Col>\r\n            <button\r\n                className=\"speakerToken\"\r\n                onClick={props.onSpeakerButtonClick}\r\n            />\r\n        </Col> :\r\n        null;\r\n\r\n    return (\r\n        <Card className=\"border-0\">\r\n            <h6 \r\n                className={`rounded currentPlayerBlock ${player.isActivePlayer ? \"activePlayerBlock\" : player.isPassed ? \"passedPlayerBlock\" : \"\"}`}\r\n                onClick={props.onEndTurn}\r\n            >\r\n                {player.isActivePlayer ? \"Current Player\" : player.isPassed ? \"Passed\" : \"\"}\r\n            </h6>\r\n            <Card className=\"playerCard\">\r\n                <Row noGutters style={{ \r\n                    backgroundColor: playerBackgroundColour, \r\n                    color: playerTextColour,\r\n                }}>\r\n                    <Col xs={2}>\r\n                        {/* TODO: Add faction icon */}\r\n                    </Col>\r\n                    <Col>\r\n                        <div>{player.playerName}</div>\r\n                        <div>{player.faction && player.faction.shortName}</div>\r\n                    </Col>\r\n                    <Col xs={2}>\r\n                        <button \r\n                            className={\r\n                                `rounded passButton \r\n                                ${!player.strategy.isUsed ? \"invisible\" : \r\n                                player.isPassed ? \"passButtonPassed\" : \"\"}`\r\n                            }\r\n                            onClick={props.onPassButtonClick}\r\n                            disabled={!player.strategy.isUsed}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n                <Row noGutters className=\"flex-column\">\r\n                    <TimerBlock currentSeconds={props.playerTimer.currentSeconds} disabled={true} />\r\n                </Row>\r\n                <Row noGutters>\r\n                    <Col>\r\n                        <button\r\n                            className=\"victoryPointButton\"\r\n                            type=\"button\"\r\n                            onClick={props.onVictoryPointsClick}\r\n                            onContextMenu={props.onVictoryPointsClick}\r\n                        >\r\n                            {player.victoryPoints}\r\n                        </button>\r\n                    </Col>\r\n                </Row>\r\n                <Row noGutters className=\"flex-column\">\r\n                    <hr className=\"playerCardDivider\" />\r\n                </Row>\r\n                <Row noGutters>\r\n                    <Col>\r\n                        {playerStrategyButton}\r\n                    </Col>\r\n                    {speakerButtonColumn}\r\n                </Row>\r\n                <Row noGutters className=\"flex-column\">\r\n                    <hr className=\"playerCardDivider\" />\r\n                </Row>\r\n            <TechPanel techs={player.techs} onTechClick={(techDefinition) => props.onTechClick(techDefinition)}/>\r\n            </Card>\r\n        </Card>\r\n    )\r\n}\r\n\r\nfunction EndRoundConfirmModal(props) {\r\n    return (\r\n        <Modal show={props.showModal} onHide={props.onCloseModal} centered>\r\n            <Modal.Body>\r\n                <h3>End the round?</h3>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={props.onCloseModal}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={props.onConfirmModal}>\r\n                    Confirm\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default StatusBoard;\r\n\r\n//#region functions\r\n\r\nfunction isAllPlayersPassed(players) {\r\n    for (let i = 0; i < players.length; i++) {\r\n        if (!players[i].isPassed) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\n//#endregion\r\n","import React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Row, Col, ButtonGroup} from 'react-bootstrap';\r\n\r\nimport './PlayAgenda.css';\r\n\r\nimport agenda_store from './data/agendas.json';\r\n\r\nclass PlayAgenda extends React.Component {\r\n    handleNextAgenda() {\r\n        if (this.props.onNextAgenda) {\r\n            return () => this.props.onNextAgenda()\r\n        }\r\n    }\r\n\r\n    handleEndAgenda() {\r\n        if (this.props.onEndAgenda) {\r\n            return () => this.props.onEndAgenda()\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <AgendaForm\r\n                        selectedAgenda={this.props.selectedAgenda}\r\n                        onAgendaChange={this.props.onAgendaChange}\r\n                        playerDetails={this.props.playerDetails}\r\n                        onAvailableVotesClick={(e, playerString, delta) => this.props.onAvailableVotesClick(e, playerString, delta)}\r\n                        onSpentVotesClick={(e, playerString, delta) => this.props.onSpentVotesClick(e, playerString, delta)}\r\n                        onVoteTargetChange={(e, playerString) => this.props.onVoteTargetChange(e, playerString)}\r\n                    />\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <Button type=\"button\" onClick={this.handleNextAgenda()}>\r\n                            Next Agenda\r\n                        </Button>\r\n                    </Col>\r\n                    <Col>\r\n                        <Button type=\"button\" onClick={this.handleEndAgenda()}>\r\n                            End Agenda Phase\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction AgendaForm(props) {\r\n    let votePanel = props.selectedAgenda ? \r\n    <VotePanel\r\n        playerDetails={props.playerDetails}\r\n        selectedAgenda={props.selectedAgenda}\r\n        onAvailableVotesClick={(e, playerString, delta) => props.onAvailableVotesClick(e, playerString, delta)}\r\n        onSpentVotesClick={(e, playerString, delta) => props.onSpentVotesClick(e, playerString, delta)}\r\n        onVoteTargetChange={(e, playerString) => props.onVoteTargetChange(e, playerString)}\r\n    />\r\n    : null\r\n\r\n    let resultsPanel = props.selectedAgenda ? \r\n    <ResultsPanel\r\n        playerDetails={props.playerDetails}\r\n    />\r\n    : null\r\n\r\n    return (\r\n        <div>\r\n            <Row>\r\n                <AgendaSelector\r\n                    selectedAgenda={props.selectedAgenda}\r\n                    onAgendaChange={props.onAgendaChange}\r\n                />\r\n            </Row>\r\n            <Row>\r\n                {votePanel}\r\n            </Row>\r\n            <Row>\r\n                {resultsPanel}\r\n            </Row>\r\n        </div>\r\n    );\r\n}\r\n\r\nclass AgendaSelector extends React.Component {\r\n    getAgendaList() {\r\n        let agendaElements = [<option key=\"unselected\" value={null} hidden/>]\r\n        agendaElements = agendaElements.concat(agenda_store.map((agenda) => \r\n            <option key={agenda.name} value={JSON.stringify(agenda)}>\r\n                {agenda.name}\r\n            </option>));\r\n\r\n        let selectedAgenda = this.props.selectedAgenda ? JSON.stringify(this.props.selectedAgenda) : undefined;\r\n\r\n        return <select \r\n            className=\"agendaName\"\r\n            id=\"agendas\" \r\n            required \r\n            defaultValue={selectedAgenda} \r\n            onChange={this.props.onAgendaChange}\r\n        >\r\n            {agendaElements}\r\n        </select>;\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"agendaCard\">\r\n                <Row>\r\n                    {this.getAgendaList()}\r\n                </Row>\r\n                <Row>\r\n                    <AgendaCard\r\n                        agenda={this.props.selectedAgenda}\r\n                    />\r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction VotePanel(props) {\r\n    const players = props.playerDetails.slice();\r\n    var speakerIndex = 0;\r\n    for (let i = 0; i < players.length; i++) {\r\n        speakerIndex = players[i].isSpeaker ? i : speakerIndex;\r\n    }\r\n\r\n    let playerVotePanels = Array(players.length).fill(null);\r\n    for (let i = 0; i < players.length; i++) {\r\n        let destinationIndex = (((i - speakerIndex) % players.length) + players.length) % players.length;\r\n        playerVotePanels[destinationIndex] =\r\n        <PlayerVotePanel\r\n            key={i}\r\n            player={players[i]}\r\n            onAvailableVotesClick={(e, playerString, delta) => props.onAvailableVotesClick(e, playerString, delta)}\r\n            onSpentVotesClick={(e, playerString, delta) => props.onSpentVotesClick(e, playerString, delta)}\r\n            onVoteTargetChange={(e, playerString) => props.onVoteTargetChange(e, playerString)}\r\n        />\r\n    }\r\n        \r\n    return (\r\n        <Col>\r\n            <Row>\r\n                <Col xs={2} xl={1}/>\r\n                <Col xs={4} xl={3}/>\r\n                <Col xs={2} xl={2}>\r\n                    <p className=\"columnHeader\">\r\n                        Available\r\n                    </p>\r\n                </Col>\r\n                <Col xs={2} xl={2}>\r\n                    <p className=\"columnHeader\">\r\n                        Assigned\r\n                    </p>\r\n                </Col>\r\n            </Row>\r\n            {playerVotePanels}\r\n        </Col>\r\n    );\r\n}\r\n\r\nfunction PlayerVotePanel(props) {\r\n        \r\n    \r\n    return (\r\n        <Row>\r\n            <Col xs={2} xl={1}>\r\n                <button \r\n                    className={`speakerToken ${props.player.isSpeaker ? \"\" : \"invisible\"}`}\r\n                />\r\n            </Col>\r\n            <Col xs={4} xl={3}>\r\n                <input\r\n                    key=\"playerName\"\r\n                    type=\"text\"\r\n                    defaultValue={props.player.playerName}\r\n                    disabled\r\n                />\r\n            </Col>\r\n            <Col xs={2} xl={2}>\r\n                <ButtonGroup>\r\n                    <Button \r\n                        variant=\"light\"\r\n                        key=\"tens\" \r\n                        className=\"digitButton tens\"\r\n                        onClick={e => props.onAvailableVotesClick(e, JSON.stringify(props.player), 10)}\r\n                        onContextMenu={e => props.onAvailableVotesClick(e, JSON.stringify(props.player), 10)}\r\n                    >\r\n                        {props.player.availableVotes >= 10 ? Math.floor(props.player.availableVotes / 10) : \"\"}\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"light\"\r\n                        key=\"ones\" \r\n                        className=\"digitButton ones\"\r\n                        onClick={e => props.onAvailableVotesClick(e, JSON.stringify(props.player), 1)}\r\n                        onContextMenu={e => props.onAvailableVotesClick(e, JSON.stringify(props.player), 1)}\r\n                    >\r\n                        {props.player.availableVotes % 10}\r\n                    </Button>\r\n                </ButtonGroup>\r\n            </Col>\r\n            <Col xs={2} xl={2}>\r\n                <ButtonGroup>\r\n                    <Button \r\n                        variant=\"light\"\r\n                        key=\"tens\" \r\n                        className=\"digitButton tens\"\r\n                        onClick={e => props.onSpentVotesClick(e, JSON.stringify(props.player), 10)}\r\n                        onContextMenu={e => props.onSpentVotesClick(e, JSON.stringify(props.player), 10)}\r\n                    >\r\n                        {props.player.spentVotes >= 10 ? Math.floor(props.player.spentVotes / 10) : \"\"}\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"light\"\r\n                        key=\"ones\" \r\n                        className=\"digitButton ones\"\r\n                        onClick={e => props.onSpentVotesClick(e, JSON.stringify(props.player), 1)}\r\n                        onContextMenu={e => props.onSpentVotesClick(e, JSON.stringify(props.player), 1)}\r\n                    >\r\n                        {props.player.spentVotes % 10}\r\n                    </Button>\r\n                </ButtonGroup>\r\n            </Col>\r\n            <Col>\r\n                <VoteTargetSelector\r\n                    voteTarget={props.player.voteTarget}\r\n                    selectedAgenda={props.selectedAgenda}\r\n                    onVoteTargetChange={e => props.onVoteTargetChange(e, JSON.stringify(props.player))}\r\n                />\r\n            </Col>\r\n        </Row>\r\n    );\r\n}\r\n\r\n\r\nfunction AgendaCard(props) {\r\n    let agenda = props.agenda;\r\n    let agendaCardDisplay = <div/>\r\n    if (agenda) {\r\n        agendaCardDisplay = <div className=\"agendaCardDisplay\">\r\n            <p className=\"agendaType\">\r\n                {agenda.type}\r\n            </p>\r\n            <p className=\"agendaElectionTarget\">\r\n                {agenda.electionTarget ? \"Elect \" + agenda.electionTarget : null}\r\n            </p>\r\n            <p className=\"agendaEffect\">\r\n                <b>\r\n                    {!agenda.electionTarget && \"For: \"}\r\n                </b>\r\n                {agenda.forEffect}\r\n            </p>\r\n            <p className=\"agendaEffect\">\r\n                <b>\r\n                    {!agenda.electionTarget && \"Against: \"}\r\n                </b>\r\n                {agenda.electionTarget ? \"\" : agenda.againstEffect ? agenda.againstEffect : \"No effect\"}\r\n            </p>\r\n        </div>\r\n    }\r\n    \r\n    return (\r\n        agendaCardDisplay\r\n    );\r\n}\r\n\r\nfunction VoteTargetSelector(props) {\r\n    let voteOptions = [<option key=\"unselected\" value={null}/>]\r\n    voteOptions = voteOptions.concat(\r\n        <option key={\"For\"} value={\"For\"}>\r\n            For\r\n        </option>\r\n    );\r\n    voteOptions = voteOptions.concat(\r\n        <option key={\"Against\"} value={\"Against\"}>\r\n            Against\r\n        </option>\r\n    );\r\n\r\n    return <select \r\n        className=\"voteTargetSelector\"\r\n        required \r\n        defaultValue={props.voteTarget} \r\n        onChange={props.onVoteTargetChange}\r\n    >\r\n        {voteOptions}\r\n    </select>;\r\n}\r\n\r\nfunction ResultsPanel(props) {\r\n    let players = props.playerDetails;\r\n    let resolutions = [];\r\n    for (let i = 0; i < players.length; i++) {\r\n        if (players[i].voteTarget && players[i].spentVotes > 0) {\r\n            let existingResolution = null;\r\n            for (let j = 0; j < resolutions.length; j++) {\r\n                if (resolutions[j].resolution === players[i].voteTarget) {\r\n                    existingResolution = j;\r\n                }\r\n            }\r\n            if (existingResolution >= 0 && resolutions[existingResolution]) {\r\n                resolutions[existingResolution] = {\r\n                    resolution: resolutions[existingResolution].resolution,\r\n                    votes: resolutions[existingResolution].votes + players[i].spentVotes,\r\n                }\r\n            }\r\n            else {\r\n                resolutions.push({\r\n                    resolution: players[i].voteTarget, \r\n                    votes: players[i].spentVotes,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    let votedResolutions = null;\r\n    if (resolutions.length > 0) {\r\n        votedResolutions = [];\r\n        for (let i = 0; i < resolutions.length; i++) {\r\n            votedResolutions.push(\r\n                <p className=\"votedResolution\" key={i}>\r\n                    {resolutions[i].resolution} - {resolutions[i].votes} votes\r\n                </p>\r\n            ); \r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {votedResolutions}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PlayAgenda;","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport objective_store from './data/objectives.json';\r\n\r\nexport default function ObjectiveSelectModal(props) {\r\n    if (!props.showModal) {\r\n        return null;\r\n    }\r\n\r\n    let selectedObjectives = props.objectives.map((objective) => objective.isRevealed ? objective : null);\r\n    selectedObjectives = selectedObjectives.filter((objective) => objective !== null);\r\n\r\n    let availableObjectives = objective_store.filter((objective) => objective.stage === props.stage);\r\n    availableObjectives = availableObjectives.filter(\r\n        (objective) => !selectedObjectives.some(\r\n            function (selectedObjective) {\r\n                return objective.id === selectedObjective.id;\r\n            }\r\n       )\r\n    );\r\n\r\n    let objectiveElements = Array(1);\r\n    objectiveElements[0] = <option key=\"unselected\" className=\"nullOption\" value={null} hidden/>\r\n    objectiveElements = objectiveElements.concat(availableObjectives.map(\r\n        (objective) => <option key={objective.id} value={JSON.stringify(objective)}>\r\n            {objective.name}\r\n        </option>));\r\n    \r\n    let objectiveSelect = <select id=\"objectives\" required onChange={props.onObjectiveChange}>\r\n        {objectiveElements}\r\n    </select>;\r\n\r\n    return (\r\n        <Modal show={props.showModal} onHide={props.onCloseModal} centered>\r\n            <Modal.Header>\r\n                <Modal.Title>Select Public Objective</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"d-flex flex-column\">\r\n                    {objectiveSelect}\r\n                </div>\r\n                <div className=\"d-flex flex-column\">\r\n                    <br/>\r\n                    <p className=\"objectiveLongDescription\">\r\n                        {props.selectedObjectiveSelection ? props.selectedObjectiveSelection.longDescription : \"\"}\r\n                    </p>\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={props.onCloseModal}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={props.onConfirmModal} disabled={!props.selectedObjectiveSelection}>\r\n                    Confirm\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function ObjectivePanel(props) {\r\n    let objectiveBlocks = Array(props.objectives.length);\r\n\r\n    for (let i = 0; i < props.objectives.length; i++) {\r\n        const objective = props.objectives[i];\r\n        objectiveBlocks[i] = <ObjectiveCard \r\n            key={objective.order} \r\n            name={objective.name} \r\n            stage={objective.stage} \r\n            shortDescription={objective.shortDescription} \r\n            isRevealed={objective.isRevealed} \r\n            onObjectiveCardClick={() => props.onObjectiveCardClick(i)} \r\n        />;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {objectiveBlocks}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction ObjectiveCard(props) {\r\n    let cardDisplay = props.isRevealed ? props.shortDescription : props.stage;\r\n\r\n    return (\r\n        <div>\r\n            <button \r\n                type=\"button\" \r\n                className={`objectiveCard stage${props.stage} ${props.isRevealed ? \"revealed\" : \"\"}`} \r\n                onClick={props.onObjectiveCardClick}\r\n            >\r\n                {cardDisplay}\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nexport default function SpeakerChangeModal(props) {\r\n    if (!props.showModal) {\r\n        return null;\r\n    }\r\n\r\n    let playerList = [<option key=\"unselected\" value={null} hidden/>];\r\n    for (let i = 0; i < props.playerDetails.length; i++) {\r\n        let player = props.playerDetails[i];\r\n        if (!player.isSpeaker) {\r\n            playerList.push(\r\n                <option key={player.playerNumber} value={player.playerNumber}>\r\n                    {player.playerName + \" - \" + player.faction.shortName}\r\n                </option>\r\n            );\r\n        }\r\n    }\r\n    let playerSelect = <select id=\"speakerCandidates\" required onChange={props.onSpeakerChange}>\r\n        {playerList}\r\n    </select>\r\n\r\n\r\n    return (\r\n        <Modal show={props.showModal} onHide={props.onCloseModal} centered>\r\n            <Modal.Header>\r\n                <Modal.Title>Select New Speaker</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"d-flex flex-column\">\r\n                    {playerSelect}\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={props.onCloseModal}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={props.onConfirmModal} disabled={!props.selectedSpeakerNumber}>\r\n                    Confirm\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport PlayerSelect from './PlayerSelect';\r\nimport StrategySelect from './StrategySelect';\r\nimport StatusBoard from './StatusBoard';\r\nimport PlayAgenda from './PlayAgenda';\r\nimport TimerBlock from './TimerBlock';\r\nimport ObjectiveSelectModal from './ObjectiveSelectModal';\r\nimport ObjectivePanel from './ObjectivePanel';\r\nimport Container from 'react-bootstrap/Container';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport SpeakerChangeModal from './SpeakerChangeModal';\r\n\r\nimport './GameManager.css';\r\n\r\nconst MODE_PLAYER_SELECT = 1;\r\nconst MODE_STRATEGY = 2;\r\nconst MODE_STATUS_BOARD = 3;\r\nconst MODE_AGENDA = 4;\r\n\r\nconst NUMBER_STRATEGIES = 8;\r\nconst NUMBER_OBJECTIVES_STAGE_ONE = 5;\r\nconst NUMBER_OBJECTIVES_STAGE_TWO = 5;\r\n\r\nconst POLITICS_CARD_NUMBER = 3;\r\n\r\nconst LEFT_CLICK = 1; //native event constant for a left click\r\nconst RIGHT_CLICK = 3; //native event constant for the opening of the context menu (i.e. right click)\r\n\r\n\r\nclass GameManager extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            //View controls\r\n            gameMode: MODE_PLAYER_SELECT,\r\n            showObjectiveSelectModal: false,\r\n            showSpeakerChangeModal: false,\r\n\r\n            //Temporary State\r\n            selectedObjective: null,\r\n            selectedObjectiveSelection: null, //used for the objective select modal to record the current selection\r\n            selectedSpeakerNumber: null, //used for the speaker select modal to record the player selected\r\n            selectedAgenda: null,\r\n\r\n            //Game Details\r\n            playerDetails: null,\r\n            playerTimers: null,\r\n            roundNumber: 1,\r\n            totalGameTimer: {\r\n                baseSeconds: 0,\r\n                currentSeconds: 0,\r\n                countStartTime: Date.now(),\r\n                isCounting: false,\r\n            },\r\n            currentTurnTimer: {\r\n                baseSeconds: 0,\r\n                currentSeconds: 0,\r\n                countStartTime: Date.now(),\r\n                isCounting: false,\r\n            },\r\n            publicObjectives: this.fillPublicObjectives(),\r\n        };\r\n    }\r\n\r\n    //#region Lifecycle\r\n    componentDidMount() {\r\n        this.heartbeat = setInterval(() => this.recalculateTimers(), 500);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.heartbeat);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Event Handlers\r\n    handleStartGame(playerDetails) {\r\n        let playerTimers = Array(playerDetails.length);\r\n        for (let i = 0; i < playerTimers.length; i++) {\r\n            playerTimers[i] = {\r\n                baseSeconds: 0,\r\n                currentSeconds: 0,\r\n                countStartTime: Date.now(),\r\n                isCounting: false,\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            playerDetails: playerDetails,\r\n            playerTimers: playerTimers,\r\n            gameMode: MODE_STRATEGY,\r\n        });\r\n\r\n        this.startGameTimer();\r\n    }\r\n\r\n    handlePlayerStrategyChange(e, playerNumber) {\r\n        let playerDetails = this.state.playerDetails.slice();\r\n        let newStrategy = {\r\n            strategyCard: JSON.parse(e.target.value),\r\n            isUsed: false,\r\n        }\r\n        playerDetails[playerNumber].strategy = newStrategy\r\n\r\n        this.setState({\r\n            playerDetails: playerDetails,\r\n        });\r\n    }\r\n\r\n    //TODO Review the function name as it's likely to become confusing once strategy cards area added to the strategy select view\r\n    handleStrategyCardClicked(playerString) {\r\n        let player = JSON.parse(playerString);\r\n        if (player.isPassed) {\r\n            return; //can't toggle strategy card if already passed\r\n        }\r\n\r\n        let newStrategy = {...player.strategy};\r\n        newStrategy.isUsed = !newStrategy.isUsed;\r\n        \r\n        let newPlayer = {...player};\r\n        newPlayer.strategy = newStrategy;\r\n\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n        \r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n        \r\n        if (newPlayer.strategy.strategyCard.number === POLITICS_CARD_NUMBER && newPlayer.strategy.isUsed) {\r\n            this.handleSpeakerButtonClicked();\r\n        }\r\n    }\r\n\r\n    handlePassButtonClicked(playerString) {\r\n        let player = JSON.parse(playerString);\r\n        if (!player.isPassed && !player.strategy.isUsed) {\r\n            return; //can't pass if strategy card is not yet played\r\n        }\r\n\r\n        let newPlayer = {...player};\r\n        newPlayer.isPassed = !newPlayer.isPassed;\r\n\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n\r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n    }\r\n\r\n    handleStartRound() {\r\n        let lowestInitiative = NUMBER_STRATEGIES;\r\n        for (let i = 0; i < this.state.playerDetails.length; i++) {\r\n            if (this.state.playerDetails[i].strategy.strategyCard.number <= lowestInitiative) {\r\n                lowestInitiative = this.state.playerDetails[i].strategy.strategyCard.number;\r\n            }\r\n        }\r\n\r\n        let newPlayerDetails = this.state.playerDetails.map((player) => {\r\n            let newPlayer = {...player};\r\n            newPlayer.isActivePlayer = newPlayer.strategy.strategyCard.number === lowestInitiative;\r\n            return newPlayer;\r\n        });\r\n\r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n            gameMode: MODE_STATUS_BOARD,\r\n        });\r\n\r\n        this.startGameTimer();\r\n        this.startTurnTimers();\r\n    }\r\n\r\n    handlePlayAgenda() {\r\n        this.setState({\r\n            gameMode: MODE_AGENDA,\r\n        });\r\n    }\r\n\r\n    handleTurnTimerClicked() {\r\n        if (this.state.currentTurnTimer.isCounting) {\r\n            this.stopTurnTimers();\r\n        }\r\n        else {\r\n            this.startTurnTimers();\r\n            this.startGameTimer(); //if turn timers are running, the game timer should be as well\r\n        }\r\n    }\r\n\r\n    handleGameTimerClicked() {\r\n        if (this.state.totalGameTimer.isCounting) {\r\n            this.stopGameTimer();\r\n            this.stopTurnTimers(); //if the game timer is stopped, all timers should be stopped\r\n        }\r\n        else {\r\n            this.startGameTimer();\r\n        }\r\n    }\r\n\r\n    handleEndRound() {\r\n        let playerDetails = this.state.playerDetails.slice().map(\r\n            player => ({\r\n                ...player,\r\n                strategy: null,\r\n                isPassed: false,\r\n            })\r\n        );\r\n\r\n        this.setState({\r\n            gameMode: MODE_STRATEGY,\r\n            roundNumber: this.state.roundNumber + 1,\r\n            playerDetails: playerDetails,\r\n        });\r\n\r\n        this.stopTurnTimers(true); //turns aren't occurring between rounds\r\n        this.startGameTimer(); //activity means the game timer should almost certainly be on\r\n    }\r\n\r\n    handleToggleTimers() {\r\n        if (this.state.totalGameTimer.isCounting) {\r\n            this.stopGameTimer();\r\n            this.stopTurnTimers();\r\n        }\r\n        else {\r\n            this.startGameTimer();\r\n            this.state.gameMode === MODE_STATUS_BOARD && this.startTurnTimers();\r\n        }\r\n    }\r\n\r\n    handleVictoryPointClick(e, playerString) {\r\n        let player = JSON.parse(playerString);\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        let newVictoryPoints = player.victoryPoints;\r\n\r\n        if (e.nativeEvent.which === LEFT_CLICK) {\r\n            newVictoryPoints = player.victoryPoints + 1;\r\n        }\r\n        else if (e.nativeEvent.which === RIGHT_CLICK) {\r\n            newVictoryPoints = player.victoryPoints - 1;\r\n        }\r\n        \r\n        if (newVictoryPoints >= 0 && newVictoryPoints <= (this.state.maxVictoryPoints ? this.state.maxVictoryPoints : 10)) {\r\n            let newPlayer = {...player};\r\n            newPlayer.victoryPoints = newVictoryPoints;\r\n            newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n            this.setState({\r\n                playerDetails: newPlayerDetails,\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    handleAvailableVotesClick(e, playerString, delta) {\r\n        let player = JSON.parse(playerString);\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        let newAvailableVotes = player.availableVotes;\r\n\r\n        if (e.nativeEvent.which === LEFT_CLICK) {\r\n            newAvailableVotes = Math.min(99, player.availableVotes + delta);\r\n        }\r\n        else if (e.nativeEvent.which === RIGHT_CLICK) {\r\n            newAvailableVotes = Math.max(0, player.availableVotes - delta);\r\n        }\r\n        \r\n        let newPlayer = {...player};\r\n        newPlayer.availableVotes = newAvailableVotes;\r\n        newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n    }\r\n\r\n    handleSpentVotesClick(e, playerString, delta) {\r\n        let player = JSON.parse(playerString);\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        let newSpentVotes = player.spentVotes;\r\n\r\n        if (e.nativeEvent.which === LEFT_CLICK) {\r\n            newSpentVotes = Math.min(player.availableVotes, player.spentVotes + delta);\r\n        }\r\n        else if (e.nativeEvent.which === RIGHT_CLICK) {\r\n            newSpentVotes = Math.max(0, player.spentVotes - delta);\r\n        }\r\n        \r\n        let newPlayer = {...player};\r\n        newPlayer.spentVotes = newSpentVotes;\r\n        newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n    }\r\n\r\n    handleVoteTargetChange(e, playerString) {\r\n        let player = JSON.parse(playerString);\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        let newVoteTarget = e.target.value;\r\n\r\n        let newPlayer = {...player};\r\n        newPlayer.voteTarget = newVoteTarget;\r\n        newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n    }\r\n\r\n    handleEndTurn() {\r\n        this.startGameTimer();\r\n        this.restartTurnTimers();\r\n    }\r\n\r\n    handleObjectiveCardClicked(index) {\r\n        let objective = this.state.publicObjectives[index];\r\n        if (!objective.isRevealed && objective.order === this.nextUnrevealedObjective()) {\r\n            this.setState({ \r\n                showObjectiveSelectModal: true,\r\n                selectedObjective: objective,\r\n            });\r\n        }\r\n    }\r\n\r\n    handleObjectiveChange(e) {\r\n        let newObjective = JSON.parse(e.target.value);\r\n        this.setState({\r\n            selectedObjectiveSelection: newObjective,\r\n        });\r\n    }\r\n\r\n    handleCloseObjectiveSelectModal(isConfirmed) {\r\n        if(isConfirmed && this.state.selectedObjectiveSelection && this.state.selectedObjective) {\r\n            let newObjective = {...this.state.selectedObjectiveSelection};\r\n            newObjective.isRevealed = true;\r\n            newObjective.order = this.state.selectedObjective.order;\r\n\r\n            let newPublicObjectives = this.state.publicObjectives.slice();\r\n            newPublicObjectives[this.state.selectedObjective.order] = newObjective;\r\n            \r\n            this.setState({\r\n                publicObjectives: newPublicObjectives,\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            showObjectiveSelectModal: false,\r\n            selectedObjective: null,\r\n            selectedObjectiveSelection: null,\r\n        });\r\n    }\r\n\r\n    handleAgendaChange(e) {\r\n        let newAgenda = JSON.parse(e.target.value);\r\n        this.setState({\r\n            selectedAgenda: newAgenda,\r\n        });\r\n    }\r\n\r\n    handleEndAgenda() {\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        for (let i = 0; i < newPlayerDetails.length; i++) {\r\n            let player = {...newPlayerDetails[i]};\r\n            player.availableVotes = 0;\r\n            player.spentVotes = 0;\r\n            player.voteTarget = null;\r\n            newPlayerDetails[i] = player;\r\n        }\r\n\r\n        this.setState({\r\n            gameMode: MODE_STRATEGY,\r\n            selectedAgenda: null,\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n    }\r\n\r\n    handleSpeakerButtonClicked() {\r\n        this.setState({ \r\n            showSpeakerChangeModal: true,\r\n        });\r\n    }\r\n\r\n    handleSpeakerChange(e) {\r\n        let newSpeakerNumber = e.target.value;\r\n        this.setState({\r\n            selectedSpeakerNumber: newSpeakerNumber,\r\n        });\r\n    }\r\n\r\n    handleCloseSpeakerChangeModal(isConfirmed) {\r\n        if(isConfirmed && this.state.selectedSpeakerNumber) {\r\n            let newPlayerDetails = this.state.playerDetails.slice();\r\n            let oldSpeaker = null;\r\n            for (let i = 0; i < newPlayerDetails.length; i++) {\r\n                if (newPlayerDetails[i].isSpeaker) {\r\n                    oldSpeaker = {...newPlayerDetails[i]}\r\n                    oldSpeaker.isSpeaker = false;\r\n                }\r\n            }\r\n\r\n            let newSpeaker = {...newPlayerDetails[this.state.selectedSpeakerNumber]};\r\n            newSpeaker.isSpeaker = true;\r\n            \r\n            newPlayerDetails[oldSpeaker.playerNumber] = oldSpeaker;\r\n            newPlayerDetails[newSpeaker.playerNumber] = newSpeaker;\r\n            \r\n            this.setState({\r\n                playerDetails: newPlayerDetails,\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            showSpeakerChangeModal: false,\r\n            selectedSpeakerNumber: null,\r\n        });\r\n    }\r\n\r\n    handleTechClicked(techDefinition, player) {\r\n        let newPlayer = {...player};\r\n        let newTechSets = player.techs.slice();\r\n        for (let i = 0; i < newTechSets.length; i++) {\r\n            let newTechs = newTechSets[i].map(tech => {\r\n                if (tech.techDefinition === techDefinition) {\r\n                    let newTech = {...tech};\r\n                    newTech.isResearched = !newTech.isResearched;\r\n                    return newTech;\r\n                }\r\n                return tech;\r\n            })\r\n            newTechSets[i] = newTechs;\r\n        }\r\n        newPlayer.techs = newTechSets;\r\n\r\n        let newPlayerDetails = this.state.playerDetails.slice();\r\n        newPlayerDetails[newPlayer.playerNumber] = newPlayer;\r\n        this.setState({\r\n            playerDetails: newPlayerDetails,\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    //#region Commands\r\n    fillPublicObjectives() {\r\n        let numberObjectives = NUMBER_OBJECTIVES_STAGE_ONE + NUMBER_OBJECTIVES_STAGE_TWO;\r\n        let objectives = Array(numberObjectives);\r\n        for (let i = 0; i < numberObjectives; i++) {\r\n            objectives[i] = {\r\n                id: null,\r\n                order: i,\r\n                stage: i < NUMBER_OBJECTIVES_STAGE_ONE ? 1 : 2,\r\n                name: null,\r\n                longDescription: null,\r\n                shortDescription: null,\r\n                isRevealed: false,\r\n            }\r\n        }\r\n        return objectives;\r\n    }\r\n\r\n    nextUnrevealedObjective() {\r\n        for (let i = 0; i < this.state.publicObjectives.length; i++) {\r\n            if (!this.state.publicObjectives[i].isRevealed) {\r\n                return this.state.publicObjectives[i].order;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    recalculateTimers() {\r\n        if (this.state.totalGameTimer && this.state.totalGameTimer.isCounting) {\r\n            this.recalculateGameTime();\r\n        }\r\n        if (this.state.currentTurnTimer && this.state.currentTurnTimer.isCounting) {\r\n            this.recalculateTurnTime();\r\n        }\r\n    }\r\n\r\n    recalculateGameTime() {\r\n        let timer = { ...this.state.totalGameTimer };\r\n        timer.currentSeconds = timer.baseSeconds + Math.floor((Date.now() - timer.countStartTime) / 1000);\r\n\r\n        this.setState({\r\n            totalGameTimer: timer,\r\n        });\r\n    }\r\n\r\n    recalculateTurnTime() {\r\n        let timer = { ...this.state.currentTurnTimer };\r\n        timer.currentSeconds = timer.baseSeconds + Math.floor((Date.now() - timer.countStartTime) / 1000);\r\n\r\n        let playerTimers = this.state.playerTimers.slice();\r\n        const playerNumber = this.getActivePlayer().playerNumber;\r\n        let playerTimer = {...playerTimers[playerNumber]};\r\n        playerTimer.currentSeconds = playerTimer.baseSeconds + Math.floor((Date.now() - playerTimer.countStartTime) / 1000);\r\n        playerTimers[playerNumber] = playerTimer;\r\n        \r\n        this.setState({\r\n            currentTurnTimer: timer,\r\n            playerTimers: playerTimers,\r\n        });\r\n    }\r\n\r\n    startTurnTimers() {\r\n        if (this.state.currentTurnTimer.isCounting) {\r\n            return; //do nothing if already counting\r\n        }\r\n        let timer = { ...this.state.currentTurnTimer };\r\n        timer.isCounting = true;\r\n        timer.countStartTime = Date.now();\r\n\r\n        let playerTimers = this.state.playerTimers.slice();\r\n        const playerNumber = this.getActivePlayer().playerNumber;\r\n\r\n        for (let i = 0; i < playerTimers.length; i++) {\r\n            let playerTimer = {...playerTimers[i]};\r\n            playerTimer.isCounting = i === playerNumber;\r\n            playerTimer.countStartTime = Date.now();\r\n            playerTimers[i] = playerTimer;\r\n    \r\n        }\r\n\r\n        this.setState({\r\n            currentTurnTimer: timer,\r\n            playerTimers: playerTimers,\r\n        })\r\n    }\r\n\r\n    stopTurnTimers(resetCurrentTurn) {\r\n        if (!this.state.currentTurnTimer.isCounting) {\r\n            return; //do nothing if already stopped\r\n        }\r\n        let timer = { ...this.state.currentTurnTimer };\r\n        timer.isCounting = false;\r\n        if (resetCurrentTurn) {\r\n            timer.baseSeconds = 0;\r\n            timer.currentSeconds = 0;\r\n        }\r\n        else {\r\n            timer.baseSeconds = timer.currentSeconds;\r\n        }\r\n\r\n        let playerTimers = this.state.playerTimers.slice();\r\n        const playerNumber = this.getActivePlayer().playerNumber;\r\n        let playerTimer = {...playerTimers[playerNumber]};\r\n        playerTimer.isCounting = false;\r\n        playerTimer.baseSeconds = playerTimer.currentSeconds;\r\n        playerTimers[playerNumber] = playerTimer;\r\n\r\n        this.setState({\r\n            currentTurnTimer: timer,\r\n            playerTimers: playerTimers,\r\n        })\r\n    }\r\n\r\n    restartTurnTimers() {\r\n        let timer = {\r\n            baseSeconds: 0,\r\n            currentSeconds: 0,\r\n            countStartTime: Date.now(),\r\n            isCounting: true,\r\n        };\r\n\r\n        let playerDetails = this.state.playerDetails.slice();\r\n        let playerTimers = this.state.playerTimers.slice();\r\n\r\n        let currentPlayer = {...this.getActivePlayer()};\r\n        let currentPlayerTimer = {...playerTimers[currentPlayer.playerNumber]};\r\n        currentPlayerTimer.isCounting = false;\r\n        currentPlayerTimer.baseSeconds = currentPlayerTimer.currentSeconds;\r\n        currentPlayer.isActivePlayer = false;\r\n        playerTimers[currentPlayer.playerNumber] = currentPlayerTimer;\r\n        playerDetails[currentPlayer.playerNumber] = currentPlayer;\r\n\r\n        let nextPlayer = this.getNextPlayer(currentPlayer)\r\n        let nextPlayerTimer = {...playerTimers[nextPlayer.playerNumber]};\r\n        nextPlayerTimer.isCounting = true;\r\n        nextPlayerTimer.countStartTime = Date.now();\r\n        nextPlayer.isActivePlayer = true;\r\n        playerTimers[nextPlayer.playerNumber] = nextPlayerTimer;\r\n        playerDetails[nextPlayer.playerNumber] = nextPlayer;\r\n        \r\n        this.setState({\r\n            currentTurnTimer: timer,\r\n            playerDetails: playerDetails,\r\n            playerTimers: playerTimers,\r\n        })\r\n    }\r\n\r\n    startGameTimer() {\r\n        if (this.state.totalGameTimer.isCounting) {\r\n            return; //do nothing if already counting\r\n        }\r\n        let timer = { ...this.state.totalGameTimer };\r\n        timer.isCounting = true;\r\n        timer.countStartTime = Date.now();\r\n\r\n        this.setState({\r\n            totalGameTimer: timer\r\n        })\r\n    }\r\n\r\n    stopGameTimer() {\r\n        if (!this.state.totalGameTimer.isCounting) {\r\n            return; //do nothing if already stopped\r\n        }\r\n        let timer = { ...this.state.totalGameTimer };\r\n        timer.baseSeconds = timer.currentSeconds;\r\n        timer.isCounting = false;\r\n\r\n        this.setState({\r\n            totalGameTimer: timer\r\n        })\r\n    }\r\n\r\n    getActivePlayer() {\r\n        for (let i = 0; i < this.state.playerDetails.length; i++) {\r\n            if (this.state.playerDetails[i].isActivePlayer) {\r\n                return this.state.playerDetails[i];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getNextPlayer(activePlayer) {\r\n        //TODO Factor in Naalu initiative (race or promissory)\r\n        let nextPlayer = activePlayer;\r\n        // determine the highest initiative number that could possibly be next. Offset by the number of strategies to allow it to loop back;\r\n        let highestInitiativeNumber = activePlayer.strategy.strategyCard.number + NUMBER_STRATEGIES - 1;\r\n        for (let i = 0; i < this.state.playerDetails.length; i++) {\r\n            let player = this.state.playerDetails[i];\r\n            if (!player.isActivePlayer && !player.isPassed) {\r\n                // determine the player initiative number, offset by the number of strategies to allow it to loop back\r\n                let playerInitiativeNumber =\r\n                    player.strategy.strategyCard.number < activePlayer.strategy.strategyCard.number ?\r\n                        player.strategy.strategyCard.number + NUMBER_STRATEGIES :\r\n                        player.strategy.strategyCard.number;\r\n                if (playerInitiativeNumber < highestInitiativeNumber) {\r\n                    highestInitiativeNumber = playerInitiativeNumber;\r\n                    nextPlayer = player;\r\n                }\r\n            }\r\n        }\r\n        return nextPlayer;\r\n    }\r\n    //#endregion\r\n\r\n    //#region Rendering methods\r\n    renderGameComponent() {\r\n        switch (this.state.gameMode) {\r\n            case MODE_PLAYER_SELECT:\r\n                return this.renderPlayerSelect();\r\n            case MODE_STRATEGY:\r\n                return this.renderStrategy();\r\n            case MODE_STATUS_BOARD:\r\n                return this.renderStatusBoard();\r\n            case MODE_AGENDA:\r\n                return this.renderAgenda();\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    renderPlayerSelect() {\r\n        return (\r\n            <Container fluid={true}>\r\n                <PlayerSelect onStartGame={playerDetails => this.handleStartGame(playerDetails)} />\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderStrategy() {\r\n        return (\r\n            <Container fluid={true}>\r\n                <Row>{this.renderGameHeader(false)}</Row>\r\n                <Row>\r\n                    <Col xs={4} md={2} xl={1}>\r\n                        {this.renderObjectivePanel()}\r\n                    </Col>\r\n                    <Col>\r\n                        <StrategySelect\r\n                            playerDetails={this.state.playerDetails}\r\n                            isGameActive={this.state.totalGameTimer.isCounting}\r\n                            onToggleTimers={() => this.handleToggleTimers()}\r\n                            onStartRound={() => this.handleStartRound()}\r\n                            onPlayAgenda={() => this.handlePlayAgenda()}\r\n                            onPlayerStrategyChange={(e, playerNumber) => this.handlePlayerStrategyChange(e, playerNumber)}\r\n                            onSpeakerButtonClick={() => this.handleSpeakerButtonClicked()}\r\n                            />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderStatusBoard() {\r\n        return (\r\n            <Container fluid={true}>\r\n                <Row>{this.renderGameHeader(true)}</Row>\r\n                <Row>\r\n                    <Col xs={4} md={2} xl={1}>\r\n                        {this.renderObjectivePanel()}\r\n                    </Col>\r\n                    <Col>\r\n                        <StatusBoard\r\n                            roundNumber={this.state.roundNumber}\r\n                            isGameActive={this.state.totalGameTimer.isCounting}\r\n                            players={this.state.playerDetails}\r\n                            playerTimers={this.state.playerTimers}\r\n                            onEndTurn={() => this.handleEndTurn()}\r\n                            onToggleTimers={() => this.handleToggleTimers()}\r\n                            onVictoryPointsClick={(e, playerString) => this.handleVictoryPointClick(e, playerString)}\r\n                            onStrategyCardClick={(playerString) => this.handleStrategyCardClicked(playerString)}\r\n                            onPassButtonClick={(playerString) => this.handlePassButtonClicked(playerString)}\r\n                            onEndRound={() => this.handleEndRound()}\r\n                            onTechClick={(techDefinition, player) => this.handleTechClicked(techDefinition, player)}\r\n                            onSpeakerButtonClick={() => this.handleSpeakerButtonClicked()}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderAgenda() {\r\n        return (\r\n            <Container fluid={true}>\r\n                <Row>{this.renderGameHeader(false)}</Row>\r\n                <Row>\r\n                    <Col xs={4} md={2} xl={1}>\r\n                        {this.renderObjectivePanel()}\r\n                    </Col>\r\n                    <Col>\r\n                        <PlayAgenda\r\n                            playerDetails={this.state.playerDetails}\r\n                            selectedAgenda={this.state.selectedAgenda}\r\n                            onAgendaChange={e => this.handleAgendaChange(e)}\r\n                            onEndAgenda={() => this.handleEndAgenda()}\r\n                            onAvailableVotesClick={(e, playerString, delta) => this.handleAvailableVotesClick(e, playerString, delta)}\r\n                            onSpentVotesClick={(e, playerString, delta) => this.handleSpentVotesClick(e, playerString, delta)}\r\n                            onVoteTargetChange={(e, playerString) => this.handleVoteTargetChange(e, playerString)}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderGameHeader(showTurnTimer) {\r\n        return <GameHeader\r\n            roundNumber={this.state.roundNumber}\r\n            totalGameTimer={this.state.totalGameTimer}\r\n            showTurnTimer={showTurnTimer}\r\n            currentTurnTimer={this.state.currentTurnTimer}\r\n            onTurnTimerClick={() => this.handleTurnTimerClicked()}\r\n            onGameTimerClick={() => this.handleGameTimerClicked()}\r\n        />\r\n    }\r\n\r\n\r\n    renderObjectivePanel() {\r\n        return <ObjectivePanel\r\n            className=\"objectivePanel\"\r\n            objectives={this.state.publicObjectives}\r\n            onObjectiveCardClick={(index) => this.handleObjectiveCardClicked(index)}\r\n        />\r\n    }\r\n    //#endregion\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.renderGameComponent()}\r\n                <ObjectiveSelectModal\r\n                    showModal={this.state.showObjectiveSelectModal}\r\n                    objectives={this.state.publicObjectives}\r\n                    stage={this.state.selectedObjective ? this.state.selectedObjective.stage : null}\r\n                    selectedObjectiveSelection={this.state.selectedObjectiveSelection}\r\n                    onConfirmModal={() => this.handleCloseObjectiveSelectModal(true)}\r\n                    onCloseModal={() => this.handleCloseObjectiveSelectModal()}\r\n                    onObjectiveChange={e => this.handleObjectiveChange(e)}\r\n                />\r\n                <SpeakerChangeModal\r\n                    showModal={this.state.showSpeakerChangeModal}\r\n                    playerDetails={this.state.playerDetails}\r\n                    selectedSpeakerNumber={this.state.selectedSpeakerNumber}\r\n                    onConfirmModal={() => this.handleCloseSpeakerChangeModal(true)}\r\n                    onCloseModal={() => this.handleCloseSpeakerChangeModal()}\r\n                    onSpeakerChange={e => this.handleSpeakerChange(e)}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction GameHeader(props) {\r\n    let turnTimer = props.showTurnTimer ?\r\n        <TimerBlock\r\n            id=\"turnTimer\"\r\n            label=\"Turn Time\"\r\n            currentSeconds={props.currentTurnTimer.currentSeconds}\r\n            onClick={() => props.onTurnTimerClick()}\r\n        /> :\r\n        null;\r\n\r\n    return (\r\n        <div>\r\n            <label className=\"timerLabel\">{\"Round: \" + props.roundNumber}</label>\r\n            {turnTimer}\r\n            <TimerBlock\r\n                id=\"turnTimer\"\r\n                label=\"Total Game Time\"\r\n                currentSeconds={props.totalGameTimer.currentSeconds}\r\n                onClick={() => props.onGameTimerClick()}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GameManager;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport GameManager from './GameManager';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport './custom.scss';\r\n\r\ndocument.oncontextmenu = (e) => e.preventDefault();\r\n\r\nReactDOM.render(\r\n    <GameManager/>,\r\n    document.getElementById(\"root\")\r\n  );\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n"],"sourceRoot":""}