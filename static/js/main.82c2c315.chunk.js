(this.webpackJsonpti4companion=this.webpackJsonpti4companion||[]).push([[0],[,,,,,,,,,function(e,t,r){e.exports=r(18)},,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(8),l=r.n(i),o=(r(14),r(1)),u=r(2),s=r(3),c=r(5),m=r(4),h=r(6),y=(r(15),["","Arborec","Barony of Letnev","Clan of Saar","Embers of Muaat","Emirates of Hacan","Federation of Sol","Ghosts of Creuss","L1Z1X Mindnet","Mentak Coalition","Naalu Collective","Nekro Virus","Sardakk N\u2019orr","Universities of Jol-Nar","Winnu","Xxcha Kingdom","Yin Brotherhood","Yssaril Tribes"]),p=[{description:null,colour:null},{description:"Red",colour:"red"},{description:"Blue",colour:"blue"},{description:"Green",colour:"green"},{description:"Yellow",colour:"yellow"},{description:"Purple",colour:"purple"},{description:"Black",colour:"black"}],d=function(e){function t(e){var r;return Object(u.a)(this,t),(r=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={selectedNumberOfPlayers:null,playerDetails:[r.createPlayer(0),r.createPlayer(1),r.createPlayer(2),r.createPlayer(3),r.createPlayer(4),r.createPlayer(5)]},r}return Object(h.a)(t,e),Object(s.a)(t,[{key:"createPlayer",value:function(e){return{playerName:"Player "+(e+1),playerNumber:e,faction:null,colour:null,victoryPoints:0,isSpeaker:0===e,isActivePlayer:0===e,timer:{baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!1}}}},{key:"playerNumberButtonHandleClick",value:function(e){var t=this.state.selectedNumberOfPlayers===e;this.setState({selectedNumberOfPlayers:t?null:e})}},{key:"determineSelection",value:function(){var e=Array(6).fill(!1);return null!==this.state.selectedNumberOfPlayers&&(e[this.state.selectedNumberOfPlayers-3]=!0),e}},{key:"handlePlayerNameChange",value:function(e,t){var r=this.state.playerDetails.slice();r[t].playerName=e.target.value,this.setState({playerDetails:r})}},{key:"handlePlayerFactionChange",value:function(e,t){var r=this.state.playerDetails.slice();r[t].faction=e.target.value,this.setState({playerDetails:r})}},{key:"handlePlayerColourChange",value:function(e,t){var r=this.state.playerDetails.slice();r[t].colour=JSON.parse(e.target.value),this.setState({playerDetails:r})}},{key:"handleStartGame",value:function(){var e=this;if(this.props.onStartGame){var t=this.state.playerDetails.slice(0,this.state.selectedNumberOfPlayers);return function(){return e.props.onStartGame(t)}}}},{key:"render",value:function(){var e=this,t=this.determineSelection();return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h1",null,"Number of Players"),n.a.createElement(f,{playerNumberSelections:t,onClick:function(t){return e.playerNumberButtonHandleClick(t)}})),n.a.createElement("form",null,n.a.createElement(v,{numberOfPlayers:this.state.selectedNumberOfPlayers,playerDetails:this.state.playerDetails,onPlayerNameChange:function(t,r){return e.handlePlayerNameChange(t,r)},onPlayerFactionChange:function(t,r){return e.handlePlayerFactionChange(t,r)},onPlayerColourChange:function(t,r){return e.handlePlayerColourChange(t,r)}}),n.a.createElement("button",{type:"button",onClick:this.handleStartGame()},"Start Game")))}}]),t}(n.a.Component),f=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderPlayerNumberButton",value:function(e){var t=this,r=this.props.playerNumberSelections[e-3];return n.a.createElement(b,{value:e,selected:r,onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderPlayerNumberButton(3),this.renderPlayerNumberButton(4),this.renderPlayerNumberButton(5),this.renderPlayerNumberButton(6))}}]),t}(n.a.Component);function b(e){return n.a.createElement("button",{className:"playerNumButton ".concat(e.selected?"selectedPlayerNumButton":""),id:"".concat(e.value,"Player"),onClick:e.onClick},e.value)}var v=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderPlayerDetailEntries",value:function(){for(var e=this,t=Array(this.props.numberOfPlayers),r=function(r){t[r]=n.a.createElement(T,{key:r,playerDetail:e.props.playerDetails[r],onPlayerNameChange:function(t){return e.props.onPlayerNameChange(t,r)},onFactionChange:function(t){return e.props.onPlayerFactionChange(t,r)},onColourChange:function(t){return e.props.onPlayerColourChange(t,r)}})},a=0;a<this.props.numberOfPlayers;a++)r(a);return n.a.createElement("div",null,t)}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderPlayerDetailEntries())}}]),t}(n.a.Component),T=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getFactionList",value:function(){var e=y.map((function(e){return n.a.createElement("option",{key:e,value:e},e)}));return n.a.createElement("select",{id:"factions",required:!0,defaultValue:this.props.playerDetail.faction,onChange:this.props.onFactionChange},e)}},{key:"getColourList",value:function(){var e=p.map((function(e){return n.a.createElement("option",{key:e.description,value:JSON.stringify(e)},e.description)})),t=this.props.playerDetail.colour?this.props.playerDetail.colour.colour:null;return n.a.createElement("select",{id:"colours",required:!0,defaultValue:t,onChange:this.props.onColourChange},e)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("input",{type:"text",defaultValue:this.props.playerDetail.playerName,onChange:this.props.onPlayerNameChange}),this.getFactionList(),this.getColourList())}}]),t}(n.a.Component),g=d,C=[{name:"",number:null,colour:null},{name:"Leadership",number:1,colour:"red"},{name:"Diplomacy",number:2,colour:"orange"},{name:"Politics",number:3,colour:"yellow"},{name:"Construction",number:4,colour:"#307843"},{name:"Trade",number:5,colour:"#58e87e"},{name:"Warfare",number:6,colour:"cyan"},{name:"Technology",number:7,colour:"#084bc9"},{name:"Imperial",number:8,colour:"purple"}],S=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleStartRound",value:function(){var e=this;if(this.props.onStartRound)return function(){return e.props.onStartRound()}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",null),n.a.createElement("form",null,n.a.createElement(k,{playerDetails:this.props.playerDetails,onPlayerStrategyChange:function(t,r){return e.props.onPlayerStrategyChange(t,r)}}),n.a.createElement("button",{type:"button",onClick:function(){return e.props.onToggleTimers()}},this.props.isGameActive?"Pause Game":"Resume Game"),n.a.createElement("button",{type:"button",onClick:this.handleStartRound()},"Start Round")))}}]),t}(n.a.Component),k=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderPlayerStrategyEntries",value:function(){for(var e=this,t=this.props.playerDetails.slice(),r=0,a=0;a<t.length;a++)r=t[a].isSpeaker?a:r;for(var i=Array(t.length).fill(null),l=function(a){var l=((a-r)%t.length+t.length)%t.length;i[l]=n.a.createElement(E,{key:t[a].playerNumber,playerDetail:t[a],onStrategyChange:function(r){return e.props.onPlayerStrategyChange(r,t[a].playerNumber)}})},o=0;o<t.length;o++)l(o);return n.a.createElement("div",null,i)}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderPlayerStrategyEntries())}}]),t}(n.a.Component),E=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getStrategyList",value:function(){var e=C.map((function(e){return n.a.createElement("option",{key:e.name,value:JSON.stringify(e)},e.name)})),t=this.props.playerDetail.strategy?this.props.playerDetail.strategy.description:null;return n.a.createElement("select",{id:"strategies",required:!0,defaultValue:t,onChange:this.props.onStrategyChange},e)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("input",{key:"playerName",type:"text",defaultValue:this.props.playerDetail.playerName,disabled:!0}),n.a.createElement("input",{key:"playerFaction",type:"text",defaultValue:this.props.playerDetail.faction,disabled:!0}),this.getStrategyList())}}]),t}(n.a.Component),O=S;r(16),r(17);function P(e){return n.a.createElement("button",{className:"timer",onClick:e.onClick,disabled:e.disabled},e.time)}var j=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=function(e){if(!e)return"00:00";var t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60,n=t>0?t+":":"";return n+=(r<10?"0"+r:r)+":",n+=a<10?"0"+a:a}(this.props.currentSeconds),r=this.props.onClick;return n.a.createElement("span",{className:"Timer"},n.a.createElement("label",{className:"timerLabel"},this.props.label),n.a.createElement(P,{time:t,disabled:this.props.disabled,onClick:r?function(){return e.props.onClick(e.props.currentSeconds)}:null}))}}]),t}(n.a.Component),N=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.players.map((function(e){return n.a.createElement(D,{player:e})}));return n.a.createElement("div",null,n.a.createElement("span",null,t),n.a.createElement("span",null,n.a.createElement("button",{type:"button",onClick:function(){return e.props.onEndTurn()}},"End Turn"),n.a.createElement("button",{type:"button",onClick:function(){return e.props.onToggleTimers()}},this.props.isGameActive?"Pause Game":"Resume Game"),n.a.createElement("button",{type:"button",onClick:function(){return e.props.onEndRound()}},"End Round")))}}]),t}(n.a.Component),D=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.player,t=e.colour?e.colour.colour:null,r=e.strategy,a=r?n.a.createElement("button",{className:"strategyCardButton",type:"button",style:{backgroundColor:r.colour}},r.number):null;return n.a.createElement("div",{className:"playerCardColumn"},n.a.createElement("div",{type:"button",className:"currentPlayerBlock".concat(e.isActivePlayer?" activePlayerBlock":"")},e.isActivePlayer?"Current Player":""),n.a.createElement("div",{className:"playerCard"},n.a.createElement("div",{style:{backgroundColor:t}},n.a.createElement("div",null,e.playerName),n.a.createElement("div",null,e.faction)),n.a.createElement("div",null,n.a.createElement(j,{currentSeconds:e.timer.currentSeconds,disabled:!0})),n.a.createElement("button",{className:"victoryPointButton",type:"button"},e.victoryPoints),n.a.createElement("hr",{className:"playerCardDivider"}),a))}}]),t}(n.a.Component),G=N;function w(e){var t=e.showTurnTimer?n.a.createElement(j,{id:"turnTimer",label:"Turn Time",currentSeconds:e.currentTurnTimer.currentSeconds,onClick:function(){return e.onTurnTimerClick()}}):null;return n.a.createElement("div",null,n.a.createElement("label",{className:"timerLabel"},"Round: "+e.roundNumber),t,n.a.createElement(j,{id:"turnTimer",label:"Total Game Time",currentSeconds:e.totalGameTimer.currentSeconds,onClick:function(){return e.onGameTimerClick()}}))}var B=function(e){function t(e){var r;return Object(u.a)(this,t),(r=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={playerDetails:null,gameMode:1,roundNumber:1,totalGameTimer:{baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!1},currentTurnTimer:{baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!1}},r}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.heartbeat=setInterval((function(){return e.recalculateTimers()}),500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.heartbeat)}},{key:"handleStartGame",value:function(e){this.setState({playerDetails:e,gameMode:2}),this.startGameTimer()}},{key:"handlePlayerStrategyChange",value:function(e,t){var r=this.state.playerDetails.slice();r[t].strategy=JSON.parse(e.target.value),this.setState({playerDetails:r})}},{key:"handleStartRound",value:function(){this.setState({gameMode:3}),this.startGameTimer(),this.startTurnTimers()}},{key:"handleTurnTimerClicked",value:function(){this.state.currentTurnTimer.isCounting?this.stopTurnTimers():(this.startTurnTimers(),this.startGameTimer())}},{key:"handleGameTimerClicked",value:function(){this.state.totalGameTimer.isCounting?(this.stopGameTimer(),this.stopTurnTimers()):this.startGameTimer()}},{key:"handleEndRound",value:function(){var e=this.state.playerDetails.slice().map((function(e){return Object(o.a)({},e,{strategy:null})}));this.setState({gameMode:2,roundNumber:this.state.roundNumber+1,playerDetails:e}),this.stopTurnTimers(!0),this.startGameTimer()}},{key:"handleToggleTimers",value:function(){this.state.totalGameTimer.isCounting?(this.stopGameTimer(),this.stopTurnTimers()):(this.startGameTimer(),3===this.state.gameMode&&this.startTurnTimers())}},{key:"handleEndTurn",value:function(){this.startGameTimer(),this.restartTurnTimers()}},{key:"recalculateTimers",value:function(){this.state.totalGameTimer&&this.state.totalGameTimer.isCounting&&this.recalculateGameTime(),this.state.currentTurnTimer&&this.state.currentTurnTimer.isCounting&&this.recalculateTurnTime()}},{key:"recalculateGameTime",value:function(){var e=Object(o.a)({},this.state.totalGameTimer);e.currentSeconds=e.baseSeconds+Math.floor((Date.now()-e.countStartTime)/1e3),this.setState({totalGameTimer:e})}},{key:"recalculateTurnTime",value:function(){var e=Object(o.a)({},this.state.currentTurnTimer);e.currentSeconds=e.baseSeconds+Math.floor((Date.now()-e.countStartTime)/1e3);for(var t=this.state.playerDetails.slice(),r=0;r<t.length;r++)if(t[r].isActivePlayer){var a=Object(o.a)({},t[r].timer);a.currentSeconds=a.baseSeconds+Math.floor((Date.now()-a.countStartTime)/1e3),t[r].timer=a}this.setState({currentTurnTimer:e,playerDetails:t})}},{key:"startTurnTimers",value:function(){if(!this.state.currentTurnTimer.isCounting){var e=Object(o.a)({},this.state.currentTurnTimer);e.isCounting=!0,e.countStartTime=Date.now();for(var t=this.state.playerDetails.slice(),r=0;r<t.length;r++)if(t[r].isActivePlayer){var a=Object(o.a)({},t[r].timer,{isCounting:!0,countStartTime:Date.now()}),n=Object(o.a)({},t[r]);n.timer=a,t[r]=n}this.setState({currentTurnTimer:e,playerDetails:t})}}},{key:"stopTurnTimers",value:function(e){if(this.state.currentTurnTimer.isCounting){var t=Object(o.a)({},this.state.currentTurnTimer);t.isCounting=!1,e?(t.baseSeconds=0,t.currentSeconds=0):t.baseSeconds=t.currentSeconds;for(var r=this.state.playerDetails.slice(),a=0;a<r.length;a++)if(r[a].isActivePlayer){var n=Object(o.a)({},r[a].timer,{isCounting:!1});n.baseSeconds=n.currentSeconds;var i=Object(o.a)({},r[a]);i.timer=n,r[a]=i}this.setState({currentTurnTimer:t,playerDetails:r})}}},{key:"restartTurnTimers",value:function(){for(var e={baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!0},t=this.getNextPlayer(this.getActivePlayer()),r=this.state.playerDetails.slice(),a=0;a<r.length;a++)if(r[a].isActivePlayer){var n=Object(o.a)({},r[a].timer,{isCounting:!1});n.baseSeconds=n.currentSeconds;var i=Object(o.a)({},r[a]);i.timer=n,i.isActivePlayer=!1,r[a]=i}else if(r[a].playerNumber===t.playerNumber){var l=Object(o.a)({},r[a].timer,{isCounting:!0,countStartTime:Date.now()}),u=Object(o.a)({},r[a]);u.timer=l,u.isActivePlayer=!0,r[a]=u}this.setState({currentTurnTimer:e,playerDetails:r})}},{key:"startGameTimer",value:function(){if(!this.state.totalGameTimer.isCounting){var e=Object(o.a)({},this.state.totalGameTimer);e.isCounting=!0,e.countStartTime=Date.now(),this.setState({totalGameTimer:e})}}},{key:"stopGameTimer",value:function(){if(this.state.totalGameTimer.isCounting){var e=Object(o.a)({},this.state.totalGameTimer);e.baseSeconds=e.currentSeconds,e.isCounting=!1,this.setState({totalGameTimer:e})}}},{key:"getActivePlayer",value:function(){for(var e=0;e<this.state.playerDetails.length;e++)if(this.state.playerDetails[e].isActivePlayer)return this.state.playerDetails[e];return null}},{key:"getNextPlayer",value:function(e){for(var t=e,r=e.strategy.number+8-1,a=0;a<this.state.playerDetails.length;a++){var n=this.state.playerDetails[a];if(!n.isActivePlayer){var i=n.strategy.number<e.strategy.number?n.strategy.number+8:n.strategy.number;i<r&&(r=i,t=n)}}return t}},{key:"renderGameComponent",value:function(){switch(this.state.gameMode){case 1:return this.renderPlayerSelect();case 2:return this.renderStrategy();case 3:return this.renderStatusBoard();default:return null}}},{key:"renderPlayerSelect",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(g,{onStartGame:function(t){return e.handleStartGame(t)}}))}},{key:"renderStrategy",value:function(){var e=this;return n.a.createElement("div",null,this.renderGameHeader(!1),n.a.createElement("h1",null,"Strategy Phase"),n.a.createElement(O,{playerDetails:this.state.playerDetails,isGameActive:this.state.totalGameTimer.isCounting,onToggleTimers:function(){return e.handleToggleTimers()},onStartRound:function(){return e.handleStartRound()},onPlayerStrategyChange:function(t,r){return e.handlePlayerStrategyChange(t,r)}}))}},{key:"renderStatusBoard",value:function(){var e=this;return n.a.createElement("div",null,this.renderGameHeader(!0),n.a.createElement("h1",null,"Status Board"),n.a.createElement(G,{roundNumber:this.state.roundNumber,isGameActive:this.state.totalGameTimer.isCounting,players:this.state.playerDetails,onEndTurn:function(){return e.handleEndTurn()},onToggleTimers:function(){return e.handleToggleTimers()},onEndRound:function(){return e.handleEndRound()}}))}},{key:"renderGameHeader",value:function(e){var t=this;return n.a.createElement(w,{roundNumber:this.state.roundNumber,totalGameTimer:this.state.totalGameTimer,showTurnTimer:e,currentTurnTimer:this.state.currentTurnTimer,onTurnTimerClick:function(){return t.handleTurnTimerClicked()},onGameTimerClick:function(){return t.handleGameTimerClicked()}})}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderGameComponent())}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.82c2c315.chunk.js.map