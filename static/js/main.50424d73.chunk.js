(this.webpackJsonpti4companion=this.webpackJsonpti4companion||[]).push([[0],{30:function(e){e.exports=JSON.parse('[{"id":1,"stage":1,"name":"Corner the Market","longDescription":"Control 4 planets that each have the same planet trait","shortDescription":"4 planets; same trait"},{"id":2,"stage":1,"name":"Develop Weaponry","longDescription":"Own 2 unit upgrade technologies","shortDescription":"2 unit upgrade techs"},{"id":3,"stage":1,"name":"Diversify Research","longDescription":"Own 2 technologies in each of 2 colors","shortDescription":"2 techs in 2 colours"},{"id":4,"stage":1,"name":"Erect a Monument","longDescription":"Spend 8 resources","shortDescription":"Spend 8 resources"},{"id":5,"stage":1,"name":"Expand Borders","longDescription":"Control 6 planets in non-home systems","shortDescription":"6 planets; non-home systems"},{"id":6,"stage":1,"name":"Found Research Outposts","longDescription":"Control 3 planets that have technology specialties","shortDescription":"3 planets; tech specialty"},{"id":7,"stage":1,"name":"Intimidate Council","longDescription":"Have 1 or more ships in 2 systems that are adjacent to Mecatol Rex\'s System","shortDescription":"2 systems; Mecatol adjacent"},{"id":8,"stage":1,"name":"Lead From the Front","longDescription":"Spend a total of 3 tokens from your tactic and/or strategy pools","shortDescription":"Spend 3 command tokens"},{"id":9,"stage":1,"name":"Negotiate Trade Routes","longDescription":"Spend 5 trade goods","shortDescription":"Spend 5 trade goods"},{"id":10,"stage":1,"name":"Sway the Council","longDescription":"Spend 8 influence","shortDescription":"Spend 8 influence"},{"id":11,"stage":2,"name":"Centralize Galactic Trade","longDescription":"Spend 10 trade goods","shortDescription":"Spend 10 trade goods"},{"id":12,"stage":2,"name":"Conquer the Weak","longDescription":"Control 1 planet that is in another player\'s home system","shortDescription":"1 planet; other home system"},{"id":13,"stage":2,"name":"Form Galactic Brain Trust","longDescription":"Control 5 planets that have technology specialties","shortDescription":"5 planets; tech specialty"},{"id":14,"stage":2,"name":"Found a Golden Age","longDescription":"Spend 16 resources","shortDescription":"Spend 16 resources"},{"id":15,"stage":2,"name":"Galvanize the People","longDescription":"Spend a total of 6 tokens from your tactic and/or strategy pools","shortDescription":"Spend 6 command tokens"},{"id":16,"stage":2,"name":"Manipulate Galactic Law","longDescription":"Spend 16 influence","shortDescription":"Spend 16 influence"},{"id":17,"stage":2,"name":"Master the Sciences","longDescription":"Own 2 technologies in each of 4 colors","shortDescription":"2 techs in 4 colours"},{"id":18,"stage":2,"name":"Revolutionize Warfare","longDescription":"Own 3 unit upgrade technologies","shortDescription":"3 unit upgrade techs"},{"id":19,"stage":2,"name":"Subdue the Galaxy","longDescription":"Control 11 planets in non-home systems","shortDescription":"11 planets; non-home systems"},{"id":20,"stage":2,"name":"Unify the Colonies","longDescription":"Control 6 planets that each have the same planet trait","shortDescription":"6 planets; same trait"}]')},33:function(e,t,a){e.exports=a(45)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),l=a.n(i),o=a(5),s=a(7),c=a(8),u=a(10),m=a(9),d=a(11),h=a(13),p=(a(38),["","Arborec","Barony of Letnev","Clan of Saar","Embers of Muaat","Emirates of Hacan","Federation of Sol","Ghosts of Creuss","L1Z1X Mindnet","Mentak Coalition","Naalu Collective","Nekro Virus","Sardakk N\u2019orr","Universities of Jol-Nar","Winnu","Xxcha Kingdom","Yin Brotherhood","Yssaril Tribes"]),y=[{description:null,colour:null},{description:"Red",colour:"red"},{description:"Blue",colour:"blue"},{description:"Green",colour:"green"},{description:"Yellow",colour:"yellow"},{description:"Purple",colour:"purple"},{description:"Black",colour:"black"}],v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={selectedNumberOfPlayers:null,playerDetails:[a.createPlayer(0),a.createPlayer(1),a.createPlayer(2),a.createPlayer(3),a.createPlayer(4),a.createPlayer(5)]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"createPlayer",value:function(e){return{playerName:"Player "+(e+1),playerNumber:e,faction:null,colour:null,victoryPoints:0,isSpeaker:0===e,isActivePlayer:0===e,timer:{baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!1}}}},{key:"playerNumberButtonHandleClick",value:function(e){var t=this.state.selectedNumberOfPlayers===e;this.setState({selectedNumberOfPlayers:t?null:e})}},{key:"determineSelection",value:function(){var e=Array(6).fill(!1);return null!==this.state.selectedNumberOfPlayers&&(e[this.state.selectedNumberOfPlayers-3]=!0),e}},{key:"handlePlayerNameChange",value:function(e,t){var a=this.state.playerDetails.slice();a[t].playerName=e.target.value,this.setState({playerDetails:a})}},{key:"handlePlayerFactionChange",value:function(e,t){var a=this.state.playerDetails.slice();a[t].faction=e.target.value,this.setState({playerDetails:a})}},{key:"handlePlayerColourChange",value:function(e,t){var a=this.state.playerDetails.slice();a[t].colour=JSON.parse(e.target.value),this.setState({playerDetails:a})}},{key:"handleStartGame",value:function(){var e=this;if(this.props.onStartGame){var t=this.state.playerDetails.slice(0,this.state.selectedNumberOfPlayers);return function(){return e.props.onStartGame(t)}}}},{key:"render",value:function(){var e=this,t=this.determineSelection();return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Number of Players"),r.a.createElement(f,{playerNumberSelections:t,onClick:function(t){return e.playerNumberButtonHandleClick(t)}})),r.a.createElement("form",null,r.a.createElement(g,{numberOfPlayers:this.state.selectedNumberOfPlayers,playerDetails:this.state.playerDetails,onPlayerNameChange:function(t,a){return e.handlePlayerNameChange(t,a)},onPlayerFactionChange:function(t,a){return e.handlePlayerFactionChange(t,a)},onPlayerColourChange:function(t,a){return e.handlePlayerColourChange(t,a)}}),r.a.createElement(h.a,{type:"button",onClick:this.handleStartGame()},"Start Game")))}}]),t}(r.a.Component),f=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderPlayerNumberButton",value:function(e){var t=this,a=this.props.playerNumberSelections[e-3];return r.a.createElement(b,{value:e,selected:a,onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderPlayerNumberButton(3),this.renderPlayerNumberButton(4),this.renderPlayerNumberButton(5),this.renderPlayerNumberButton(6))}}]),t}(r.a.Component);function b(e){return r.a.createElement("button",{className:"playerNumButton ".concat(e.selected?"selectedPlayerNumButton":""),id:"".concat(e.value,"Player"),onClick:e.onClick},e.value)}var g=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderPlayerDetailEntries",value:function(){for(var e=this,t=Array(this.props.numberOfPlayers),a=function(a){t[a]=r.a.createElement(C,{key:a,playerDetail:e.props.playerDetails[a],onPlayerNameChange:function(t){return e.props.onPlayerNameChange(t,a)},onFactionChange:function(t){return e.props.onPlayerFactionChange(t,a)},onColourChange:function(t){return e.props.onPlayerColourChange(t,a)}})},n=0;n<this.props.numberOfPlayers;n++)a(n);return r.a.createElement("div",null,t)}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderPlayerDetailEntries())}}]),t}(r.a.Component),C=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getFactionList",value:function(){var e=p.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}));return r.a.createElement("select",{id:"factions",required:!0,defaultValue:this.props.playerDetail.faction,onChange:this.props.onFactionChange},e)}},{key:"getColourList",value:function(){var e=y.map((function(e){return r.a.createElement("option",{key:e.description,value:JSON.stringify(e)},e.description)})),t=this.props.playerDetail.colour?this.props.playerDetail.colour.colour:null;return r.a.createElement("select",{id:"colours",required:!0,defaultValue:t,onChange:this.props.onColourChange},e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",defaultValue:this.props.playerDetail.playerName,onChange:this.props.onPlayerNameChange}),this.getFactionList(),this.getColourList())}}]),t}(r.a.Component),S=v,T=a(22),O=a(47),k=[{name:"",number:null,colour:null},{name:"Leadership",number:1,colour:"red"},{name:"Diplomacy",number:2,colour:"orange"},{name:"Politics",number:3,colour:"yellow"},{name:"Construction",number:4,colour:"#307843"},{name:"Trade",number:5,colour:"#58e87e"},{name:"Warfare",number:6,colour:"cyan"},{name:"Technology",number:7,colour:"#084bc9"},{name:"Imperial",number:8,colour:"purple"}],j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleStartRound",value:function(){var e=this;if(this.props.onStartRound)return function(){return e.props.onStartRound()}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(T.a,null),r.a.createElement(T.a,null,r.a.createElement(E,{playerDetails:this.props.playerDetails,onPlayerStrategyChange:function(t,a){return e.props.onPlayerStrategyChange(t,a)}})),r.a.createElement(T.a,null,r.a.createElement(O.a,null,r.a.createElement(h.a,{variant:"light",type:"button",onClick:function(){return e.props.onToggleTimers()}},this.props.isGameActive?"Pause Game":"Resume Game")),r.a.createElement(O.a,null,r.a.createElement(h.a,{type:"button",onClick:this.handleStartRound()},"Start Round"))))}}]),t}(r.a.Component),E=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderPlayerStrategyEntries",value:function(){for(var e=this,t=this.props.playerDetails.slice(),a=0,n=0;n<t.length;n++)a=t[n].isSpeaker?n:a;for(var i=Array(t.length).fill(null),l=function(n){var l=((n-a)%t.length+t.length)%t.length;i[l]=r.a.createElement(D,{key:t[n].playerNumber,playerDetail:t[n],onStrategyChange:function(a){return e.props.onPlayerStrategyChange(a,t[n].playerNumber)}})},o=0;o<t.length;o++)l(o);return r.a.createElement("div",null,i)}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderPlayerStrategyEntries())}}]),t}(r.a.Component),D=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getStrategyList",value:function(){var e=k.map((function(e){return r.a.createElement("option",{key:e.name,value:JSON.stringify(e)},e.name)})),t=this.props.playerDetail.strategy?this.props.playerDetail.strategy.description:null;return r.a.createElement("select",{id:"strategies",required:!0,defaultValue:t,onChange:this.props.onStrategyChange},e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{key:"playerName",type:"text",defaultValue:this.props.playerDetail.playerName,disabled:!0}),r.a.createElement("input",{key:"playerFaction",type:"text",defaultValue:this.props.playerDetail.faction,disabled:!0}),this.getStrategyList())}}]),t}(r.a.Component),P=j;a(39);function N(e){return r.a.createElement("button",{className:"timer",onClick:e.onClick,disabled:e.disabled},e.time)}var G=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=function(e){if(!e)return"00:00";var t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60,r=t>0?t+":":"";return r+=(a<10?"0"+a:a)+":",r+=n<10?"0"+n:n}(this.props.currentSeconds),a=this.props.onClick;return r.a.createElement("span",{className:"Timer"},r.a.createElement("label",{className:"timerLabel"},this.props.label),r.a.createElement(N,{time:t,disabled:this.props.disabled,onClick:a?function(){return e.props.onClick(e.props.currentSeconds)}:null}))}}]),t}(r.a.Component);a(40);function w(e){var t=e.player,a=t.colour?t.colour.colour:null,n=t.strategy,i=n?r.a.createElement("button",{className:"strategyCardButton",type:"button",style:{backgroundColor:n.isUsed?"grey":n.colour},onClick:e.onStrategyCardClick},n.number):null;return r.a.createElement("div",{className:"playerCardColumn"},r.a.createElement("div",{className:"currentPlayerBlock".concat(t.isActivePlayer?" activePlayerBlock":""),onClick:e.onEndTurn},t.isActivePlayer?"Current Player":""),r.a.createElement("div",{className:"playerCard"},r.a.createElement(T.a,{noGutters:!0,style:{backgroundColor:a},className:"flex-column"},r.a.createElement("div",null,t.playerName),r.a.createElement("div",null,t.faction)),r.a.createElement(T.a,{noGutters:!0,className:"flex-column"},r.a.createElement(G,{currentSeconds:t.timer.currentSeconds,disabled:!0})),r.a.createElement(T.a,{noGutters:!0},r.a.createElement(O.a,null,r.a.createElement("button",{className:"victoryPointButton",type:"button",onClick:e.onVictoryPointsClick,onContextMenu:e.onVictoryPointsClick},t.victoryPoints))),r.a.createElement(T.a,{noGutters:!0,className:"flex-column"},r.a.createElement("hr",{className:"playerCardDivider"})),r.a.createElement(T.a,{noGutters:!0},r.a.createElement(O.a,null,i)),r.a.createElement(T.a,{noGutters:!0,className:"flex-column"},r.a.createElement("hr",{className:"playerCardDivider"}))))}var M=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.players.map((function(t){return r.a.createElement(O.a,{key:t.playerNumber},r.a.createElement(w,{key:t.playerNumber,player:t,onEndTurn:function(){return e.props.onEndTurn()},onVictoryPointsClick:function(a){return e.props.onVictoryPointsClick(a,JSON.stringify(t))},onStrategyCardClick:function(){return e.props.onStrategyCardClick(JSON.stringify(t))}}))}));return r.a.createElement(T.a,{className:"d-flex flex-column"},r.a.createElement(T.a,null,t),r.a.createElement(T.a,{className:"d-flex align-items-end"},r.a.createElement(O.a,{s:{span:3,offset:1}},r.a.createElement(h.a,{variant:"success",type:"button",onClick:function(){return e.props.onEndTurn()}},"End Turn")),r.a.createElement(O.a,{s:{span:3,offset:1}},r.a.createElement(h.a,{variant:"light",type:"button",onClick:function(){return e.props.onToggleTimers()}},this.props.isGameActive?"Pause Game":"Resume Game")),r.a.createElement(O.a,{s:{span:3,offset:1}},r.a.createElement(h.a,{type:"button",onClick:function(){return e.props.onEndRound()}},"End Round"))))}}]),t}(r.a.Component),R=a(20),x=a(30);function A(e){if(!e.showModal)return null;var t=e.objectives.map((function(e){return e.isRevealed?e:null}));t=t.filter((function(e){return null!==e}));var a=x.filter((function(t){return t.stage===e.stage}));a=a.filter((function(e){return!t.some((function(t){return e.id===t.id}))}));var n=Array(1);n[0]=r.a.createElement("option",{key:"unselected",className:"nullOption",value:null,hidden:!0},"Select..."),n=n.concat(a.map((function(e){return r.a.createElement("option",{key:e.id,value:JSON.stringify(e)},e.name)})));var i=r.a.createElement("select",{id:"objectives",required:!0,onChange:e.onObjectiveChange},n);return r.a.createElement(R.a,{show:e.showModal,onHide:e.onCloseModal,centered:!0},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"Select Public Objective")),r.a.createElement(R.a.Body,null,r.a.createElement("div",{className:"d-flex flex-column"},i),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("br",null),r.a.createElement("p",{className:"objectiveLongDescription"},e.selectedObjectiveSelection?e.selectedObjectiveSelection.longDescription:""))),r.a.createElement(R.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:e.onCloseModal},"Cancel"),r.a.createElement(h.a,{variant:"primary",onClick:e.onConfirmModal,disabled:!e.selectedObjectiveSelection},"Confirm")))}function B(e){for(var t=Array(e.objectives.length),a=function(a){var n=e.objectives[a];t[a]=r.a.createElement(F,{key:n.order,name:n.name,stage:n.stage,shortDescription:n.shortDescription,isRevealed:n.isRevealed,onObjectiveCardClick:function(){return e.onObjectiveCardClick(a)}})},n=0;n<e.objectives.length;n++)a(n);return r.a.createElement("div",null,t)}function F(e){var t=e.isRevealed?e.shortDescription:e.stage;return r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"objectiveCard stage".concat(e.stage," ").concat(e.isRevealed?"revealed":""),onClick:e.onObjectiveCardClick},t))}var V=a(26);a(43);function J(e){var t=e.showTurnTimer?r.a.createElement(G,{id:"turnTimer",label:"Turn Time",currentSeconds:e.currentTurnTimer.currentSeconds,onClick:function(){return e.onTurnTimerClick()}}):null;return r.a.createElement("div",null,r.a.createElement("label",{className:"timerLabel"},"Round: "+e.roundNumber),t,r.a.createElement(G,{id:"turnTimer",label:"Total Game Time",currentSeconds:e.totalGameTimer.currentSeconds,onClick:function(){return e.onGameTimerClick()}}))}var L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={gameMode:1,showObjectiveSelectModal:!1,selectedObjective:null,selectedObjectiveSelection:null,playerDetails:null,roundNumber:1,totalGameTimer:{baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!1},currentTurnTimer:{baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!1},publicObjectives:a.fillPublicObjectives()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.heartbeat=setInterval((function(){return e.recalculateTimers()}),500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.heartbeat)}},{key:"handleStartGame",value:function(e){this.setState({playerDetails:e,gameMode:2}),this.startGameTimer()}},{key:"handlePlayerStrategyChange",value:function(e,t){var a=this.state.playerDetails.slice(),n=JSON.parse(e.target.value);n.isUsed=!1,a[t].strategy=n,this.setState({playerDetails:a})}},{key:"handleStrategyCardClicked",value:function(e){var t=JSON.parse(e);if(!t.isPassed){var a=Object(o.a)({},t.strategy);a.isUsed=!a.isUsed;var n=Object(o.a)({},t);n.strategy=a;var r=this.state.playerDetails.slice();r[n.playerNumber]=n,this.setState({playerDetails:r})}}},{key:"handleStartRound",value:function(){this.setState({gameMode:3}),this.startGameTimer(),this.startTurnTimers()}},{key:"handleTurnTimerClicked",value:function(){this.state.currentTurnTimer.isCounting?this.stopTurnTimers():(this.startTurnTimers(),this.startGameTimer())}},{key:"handleGameTimerClicked",value:function(){this.state.totalGameTimer.isCounting?(this.stopGameTimer(),this.stopTurnTimers()):this.startGameTimer()}},{key:"handleEndRound",value:function(){var e=this.state.playerDetails.slice().map((function(e){return Object(o.a)({},e,{strategy:null})}));this.setState({gameMode:2,roundNumber:this.state.roundNumber+1,playerDetails:e}),this.stopTurnTimers(!0),this.startGameTimer()}},{key:"handleToggleTimers",value:function(){this.state.totalGameTimer.isCounting?(this.stopGameTimer(),this.stopTurnTimers()):(this.startGameTimer(),3===this.state.gameMode&&this.startTurnTimers())}},{key:"handleVictoryPointClick",value:function(e,t){var a=JSON.parse(t),n=this.state.playerDetails.slice(),r=a.victoryPoints;if(1===e.nativeEvent.which?r=a.victoryPoints+1:3===e.nativeEvent.which&&(r=a.victoryPoints-1),r>=0&&r<=(this.state.maxVictoryPoints?this.state.maxVictoryPoints:10)){var i=Object(o.a)({},a);i.victoryPoints=r,n[i.playerNumber]=i,this.setState({playerDetails:n})}}},{key:"handleEndTurn",value:function(){this.startGameTimer(),this.restartTurnTimers()}},{key:"handleObjectiveCardClicked",value:function(e){var t=this.state.publicObjectives[e];t.isRevealed||t.order!==this.nextUnrevealedObjective()||this.setState({showObjectiveSelectModal:!0,selectedObjective:t})}},{key:"handleObjectiveChange",value:function(e){var t=JSON.parse(e.target.value);this.setState({selectedObjectiveSelection:t})}},{key:"handleCloseObjectiveSelectModal",value:function(e){if(e&&this.state.selectedObjectiveSelection&&this.state.selectedObjective){var t=Object(o.a)({},this.state.selectedObjectiveSelection);t.isRevealed=!0,t.order=this.state.selectedObjective.order;var a=this.state.publicObjectives.slice();a[this.state.selectedObjective.order]=t,this.setState({publicObjectives:a,showObjectiveSelectModal:!1})}this.setState({showObjectiveSelectModal:!1,selectedObjective:null,selectedObjectiveSelection:null})}},{key:"fillPublicObjectives",value:function(){for(var e=Array(10),t=0;t<10;t++)e[t]={id:null,order:t,stage:t<5?1:2,name:null,longDescription:null,shortDescription:null,isRevealed:!1};return e}},{key:"nextUnrevealedObjective",value:function(){for(var e=0;e<this.state.publicObjectives.length;e++)if(!this.state.publicObjectives[e].isRevealed)return this.state.publicObjectives[e].order;return null}},{key:"recalculateTimers",value:function(){this.state.totalGameTimer&&this.state.totalGameTimer.isCounting&&this.recalculateGameTime(),this.state.currentTurnTimer&&this.state.currentTurnTimer.isCounting&&this.recalculateTurnTime()}},{key:"recalculateGameTime",value:function(){var e=Object(o.a)({},this.state.totalGameTimer);e.currentSeconds=e.baseSeconds+Math.floor((Date.now()-e.countStartTime)/1e3),this.setState({totalGameTimer:e})}},{key:"recalculateTurnTime",value:function(){var e=Object(o.a)({},this.state.currentTurnTimer);e.currentSeconds=e.baseSeconds+Math.floor((Date.now()-e.countStartTime)/1e3);for(var t=this.state.playerDetails.slice(),a=0;a<t.length;a++)if(t[a].isActivePlayer){var n=Object(o.a)({},t[a].timer);n.currentSeconds=n.baseSeconds+Math.floor((Date.now()-n.countStartTime)/1e3),t[a].timer=n}this.setState({currentTurnTimer:e,playerDetails:t})}},{key:"startTurnTimers",value:function(){if(!this.state.currentTurnTimer.isCounting){var e=Object(o.a)({},this.state.currentTurnTimer);e.isCounting=!0,e.countStartTime=Date.now();for(var t=this.state.playerDetails.slice(),a=0;a<t.length;a++)if(t[a].isActivePlayer){var n=Object(o.a)({},t[a].timer,{isCounting:!0,countStartTime:Date.now()}),r=Object(o.a)({},t[a]);r.timer=n,t[a]=r}this.setState({currentTurnTimer:e,playerDetails:t})}}},{key:"stopTurnTimers",value:function(e){if(this.state.currentTurnTimer.isCounting){var t=Object(o.a)({},this.state.currentTurnTimer);t.isCounting=!1,e?(t.baseSeconds=0,t.currentSeconds=0):t.baseSeconds=t.currentSeconds;for(var a=this.state.playerDetails.slice(),n=0;n<a.length;n++)if(a[n].isActivePlayer){var r=Object(o.a)({},a[n].timer,{isCounting:!1});r.baseSeconds=r.currentSeconds;var i=Object(o.a)({},a[n]);i.timer=r,a[n]=i}this.setState({currentTurnTimer:t,playerDetails:a})}}},{key:"restartTurnTimers",value:function(){for(var e={baseSeconds:0,currentSeconds:0,countStartTime:Date.now(),isCounting:!0},t=this.getNextPlayer(this.getActivePlayer()),a=this.state.playerDetails.slice(),n=0;n<a.length;n++)if(a[n].isActivePlayer){var r=Object(o.a)({},a[n].timer,{isCounting:!1});r.baseSeconds=r.currentSeconds;var i=Object(o.a)({},a[n]);i.timer=r,i.isActivePlayer=!1,a[n]=i}else if(a[n].playerNumber===t.playerNumber){var l=Object(o.a)({},a[n].timer,{isCounting:!0,countStartTime:Date.now()}),s=Object(o.a)({},a[n]);s.timer=l,s.isActivePlayer=!0,a[n]=s}this.setState({currentTurnTimer:e,playerDetails:a})}},{key:"startGameTimer",value:function(){if(!this.state.totalGameTimer.isCounting){var e=Object(o.a)({},this.state.totalGameTimer);e.isCounting=!0,e.countStartTime=Date.now(),this.setState({totalGameTimer:e})}}},{key:"stopGameTimer",value:function(){if(this.state.totalGameTimer.isCounting){var e=Object(o.a)({},this.state.totalGameTimer);e.baseSeconds=e.currentSeconds,e.isCounting=!1,this.setState({totalGameTimer:e})}}},{key:"getActivePlayer",value:function(){for(var e=0;e<this.state.playerDetails.length;e++)if(this.state.playerDetails[e].isActivePlayer)return this.state.playerDetails[e];return null}},{key:"getNextPlayer",value:function(e){for(var t=e,a=e.strategy.number+8-1,n=0;n<this.state.playerDetails.length;n++){var r=this.state.playerDetails[n];if(!r.isActivePlayer){var i=r.strategy.number<e.strategy.number?r.strategy.number+8:r.strategy.number;i<a&&(a=i,t=r)}}return t}},{key:"renderGameComponent",value:function(){switch(this.state.gameMode){case 1:return this.renderPlayerSelect();case 2:return this.renderStrategy();case 3:return this.renderStatusBoard();default:return null}}},{key:"renderPlayerSelect",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S,{onStartGame:function(t){return e.handleStartGame(t)}}))}},{key:"renderStrategy",value:function(){var e=this;return r.a.createElement(V.a,{fluid:!0},r.a.createElement(T.a,null,this.renderGameHeader(!1)),r.a.createElement(T.a,null,this.renderObjectivePanel(),r.a.createElement(O.a,null,r.a.createElement(P,{playerDetails:this.state.playerDetails,isGameActive:this.state.totalGameTimer.isCounting,onToggleTimers:function(){return e.handleToggleTimers()},onStartRound:function(){return e.handleStartRound()},onPlayerStrategyChange:function(t,a){return e.handlePlayerStrategyChange(t,a)}}))))}},{key:"renderStatusBoard",value:function(){var e=this;return r.a.createElement(V.a,{fluid:!0},r.a.createElement(T.a,null,this.renderGameHeader(!0)),r.a.createElement(T.a,null,this.renderObjectivePanel(),r.a.createElement(O.a,null,r.a.createElement(M,{roundNumber:this.state.roundNumber,isGameActive:this.state.totalGameTimer.isCounting,players:this.state.playerDetails,onEndTurn:function(){return e.handleEndTurn()},onToggleTimers:function(){return e.handleToggleTimers()},onVictoryPointsClick:function(t,a){return e.handleVictoryPointClick(t,a)},onStrategyCardClick:function(t){return e.handleStrategyCardClicked(t)},onEndRound:function(){return e.handleEndRound()}}))))}},{key:"renderGameHeader",value:function(e){var t=this;return r.a.createElement(J,{roundNumber:this.state.roundNumber,totalGameTimer:this.state.totalGameTimer,showTurnTimer:e,currentTurnTimer:this.state.currentTurnTimer,onTurnTimerClick:function(){return t.handleTurnTimerClicked()},onGameTimerClick:function(){return t.handleGameTimerClicked()}})}},{key:"renderObjectivePanel",value:function(){var e=this;return r.a.createElement(B,{className:"objectivePanel",objectives:this.state.publicObjectives,onObjectiveCardClick:function(t){return e.handleObjectiveCardClicked(t)}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.renderGameComponent(),r.a.createElement(A,{showModal:this.state.showObjectiveSelectModal,objectives:this.state.publicObjectives,stage:this.state.selectedObjective?this.state.selectedObjective.stage:null,selectedObjectiveSelection:this.state.selectedObjectiveSelection,onConfirmModal:function(){return e.handleCloseObjectiveSelectModal(!0)},onCloseModal:function(){return e.handleCloseObjectiveSelectModal()},onObjectiveChange:function(t){return e.handleObjectiveChange(t)}}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(44);document.oncontextmenu=function(e){return e.preventDefault()},l.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.50424d73.chunk.js.map